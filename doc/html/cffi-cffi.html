<!DOCTYPE html><html><head><meta charset="utf-8"/>
<title>Tcl CFFI package</title>
<link rel='stylesheet' type='text/css' href='assets/ruff-min.css' />
<script type='text/javascript' src='assets/ruff-min.js'></script>
</head>
<body>
<div class='ruff-layout'>
<header class='ruff-layout-header ruff-hd'>
<a style='text-decoration:none;' href='cffi.html'>Tcl CFFI package (v2.0.3)</a>


            <div id="ruffButtonBar">
            <button id="ruffNavMove" onclick="ruffMoveNavPane()"></button>
            <button id="ruffToggleTheme" onclick="ruffNextTheme()"></button>
            </div>
        </header><main class='ruff-layout-main ruff-bd'><h1 class='ruff'><a name='::cffi'></a>::cffi<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>This is the reference for commands in the <code>cffi</code> namespace. See the <a href="cffi.html" >Start page</a> for an introductory usage guide. See <a href="cffi-Concepts.html#::Concepts" title="Concepts" class='ruff_cmd'>Concepts</a> for a mapping of C types and program elements to the script level.</p>
<p class='ruff'>The package is loaded in standard fashion with <code>package require</code>:</p>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
package require cffi
</pre>

</figure><h2 class='ruff'><a name='::cffi-Commands'></a>Commands<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h2>
<div style='clear:both;'></div>
<h3 class='ruffproc'><a name='::cffi::alias'>alias</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::alias body" title="body" class='ruff_cmd'>body</a></td><td>Returns the resolved body of an alias.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::alias clear" title="clear" class='ruff_cmd'>clear</a></td><td>Deletes all aliases from the interpreter.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::alias define" title="define" class='ruff_cmd'>define</a></td><td>Defines one or more type aliases.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::alias delete" title="delete" class='ruff_cmd'>delete</a></td><td>Deletes aliases matching a pattern.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::alias list" title="list" class='ruff_cmd'>list</a></td><td>Returns a list of aliases that match the specified pattern.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::alias load" title="load" class='ruff_cmd'>load</a></td><td>Loads predefined type aliases.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::alias body'>alias body</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the resolved body of an alias.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias body</span> <span class='ruff_arg'>alias_name</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>alias_name</code></td><td>Name of alias to be retrieved.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The alias must be one defined in the current <a href="cffi-Concepts.html#::Concepts-Scopes" title="scope" >scope</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the resolved body of an alias.</p>
<h3 class='ruffproc'><a name='::cffi::alias clear'>alias clear</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Deletes all aliases from the interpreter</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias clear</span> </div>
<h3 class='ruffproc'><a name='::cffi::alias define'>alias define</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines one or more type aliases.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias define</span> <span class='ruff_arg'>name definition</span><br><span class='ruff_cmd'>alias define</span> <span class='ruff_arg'>aliasdefs</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>aliasdefs</code></td><td>Dictionary mapping alias names to their definition.</td></tr>
<tr><td><code>definition</code></td><td>Definition for the alias.</td></tr>
<tr><td><code>name</code></td><td>Name for type alias. Must begin with an alphabetic character and may contain alphanumerics and underscore.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Given two arguments, creates an alias of the given name for passed definition. If a single argument is provided, it must be a dictionary mapping alias names to their definitions.</p>
<p class='ruff'>An error will be raised if an alias name matches a built-in type or if an alias of that name already exists with a different definition in the same scope.</p>
<p class='ruff'>The definition may itself be based on an existing alias. In this case the existing alias is immediately resolved and expanded as part of the definition so further changes to it are not reflected in the alias being defined.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Type aliases" title="Type aliases" >Type aliases</a> for more on type aliases.</p>
<h3 class='ruffproc'><a name='::cffi::alias delete'>alias delete</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Deletes aliases matching a pattern.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias delete</span> <span class='ruff_arg'>pattern</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match against aliases.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command deletes all aliases whose name matches the specified pattern. The conditions for matching the pattern are:</p>
<ul class='ruff'>
<li>the tail of the pattern must match the tail of the alias name using Tcl's glob pattern matching rules.</li>
<li>the scope component of the alias name must match exactly.</li>
</ul>
<h3 class='ruffproc'><a name='::cffi::alias list'>alias list</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of aliases that match the specified pattern.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias list</span> <span class='ruff_arg'>?pattern?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match against aliases. Optional, default <code>*</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command returns the alias names that match the specified pattern. The conditions for matching the pattern are:</p>
<ul class='ruff'>
<li>the tail of the pattern must match the tail of the alias name using Tcl's glob pattern matching rules.</li>
<li>the scope component of the alias name must match the pattern's scope exactly. If the pattern does not include a scope, the caller's scope is assumed.</li>
</ul>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of aliases that match the specified pattern.</p>
<h3 class='ruffproc'><a name='::cffi::alias load'>alias load</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Loads predefined type aliases.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>alias load</span> <span class='ruff_arg'>alias_set</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>alias_set</code></td><td>The alias set to load.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The aliases are loaded into the <code>::cffi::c</code> scope. Since this scope is also searched when looking up aliases, the aliases defined by this command is available in all namespace without explicit qualification.</p>
<p class='ruff'>The possible values of <code>$alias_set</code> are <code>C</code>, <code>win32</code> (Windows only), or <code>posix</code> (platform dependent).</p>
<p class='ruff'>The <code>C</code> predefined alias set includes <code>_Bool</code>, <code>bool</code>, <code>int8_t</code> <code>uint8_t</code> <code>int16_t</code> <code>uint16_t</code> <code>int32_t</code> <code>uint32_t</code> <code>int64_t</code> <code>uint64_t</code> <code>size_t</code> <code>ssize_t</code></p>
<p class='ruff'>The <code>win32</code> predefined alias set includes <code>BOOL</code> <code>BOOLEAN</code> <code>BYTE</code> <code>CHAR</code> <code>DWORD</code> <code>DWORDLONG</code> <code>DWORD_PTR</code> <code>HALF_PTR</code> <code>HANDLE</code> <code>INT</code> <code>INT_PTR</code> <code>LONG</code> <code>LONGLONG</code> <code>LONG_PTR</code> <code>LPARAM</code> <code>LPVOID</code> <code>LRESULT</code> <code>SHORT</code> <code>SIZE_T</code> <code>SSIZE_T</code> <code>UCHAR</code> <code>UINT</code> <code>UINT_PTR</code> <code>ULONG</code> <code>ULONGLONG</code> <code>ULONG_PTR</code> <code>USHORT</code> <code>WORD</code> <code>WPARAM</code></p>
<p class='ruff'>The <code>posix</code> alias set is platform dependent. In POSIX compliant environments, it includes <code>blkcnt_t</code> <code>blksize_t</code> <code>clock_t</code> <code>dev_t</code> <code>fsblkcnt_t</code> <code>fsfilcnt_t</code> <code>gid_t</code> <code>id_t</code> <code>ino_t</code> <code>key_t</code> <code>mode_t</code> <code>nlink_t</code> <code>off_t</code> <code>pid_t</code> <code>size_t</code> <code>ssize_t</code> <code>suseconds_t</code> <code>time_t</code> <code>uid_t</code>. On Windows, it only includes <code>dev_t</code> <code>ino_t</code> <code>off_t</code> <code>time_t</code>.</p>
<h3 class='ruffproc'><a name='::cffi::arena'>arena</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>arena</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::arena allocate" title="allocate" class='ruff_cmd'>allocate</a></td><td>Allocates memory in the current arena frame in the memory arena.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::arena new" title="new" class='ruff_cmd'>new</a></td><td>Allocates memory in the current arena for a type and initializes it.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::arena popframe" title="popframe" class='ruff_cmd'>popframe</a></td><td>Pops the current frame from the memory arena.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::arena pushframe" title="pushframe" class='ruff_cmd'>pushframe</a></td><td>Pushes a new stack frame on the memory arena.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::arena allocate'>arena allocate</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory in the current arena frame in the memory arena.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>arena allocate</span> <span class='ruff_arg'>sizespec ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>sizespec</code></td><td>Requested size of memory block. This may be specified either as an integer value or a type specification (optional)</td></tr>
<tr><td><code>tag</code></td><td>Tag for returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The allocated memory will stay allocated until the frame is destroyed with <a href="cffi-cffi.html#::cffi::arena popframe" title="arena popframe" class='ruff_cmd'>arena popframe</a>. The size <code>$sizespec</code> may be specified as a positive integer or a CFFI type declaration in which case the memory allocated is that of the type's size.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocation.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::arena new" title="arena new" class='ruff_cmd'>arena new</a></p>
<h3 class='ruffproc'><a name='::cffi::arena new'>arena new</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory in the current arena for a type and initializes it.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>arena new</span> <span class='ruff_arg'>typespec initializer ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>typespec</code></td><td>A type declaration.</td></tr>
<tr><td><code>initializer</code></td><td>The type-specific value to use to initialize allocated memory.</td></tr>
<tr><td><code>tag</code></td><td>The optional tag for the returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$typespec</code> argument may be any type specificiation. If an array is specified of a larger size than the number of elements in <code>$initializer</code>, the remaining elements are zeroed out.</p>
<p class='ruff'>The returned memory will be freed when the arena frame is freed with <a href="cffi-cffi.html#::cffi::arena popframe" title="arena popframe" class='ruff_cmd'>arena popframe</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::arena allocate" title="arena allocate" class='ruff_cmd'>arena allocate</a></p>
<h3 class='ruffproc'><a name='::cffi::arena popframe'>arena popframe</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Pops the current frame from the memory arena.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>arena popframe</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>All allocations from the popped frame are freed and pointers to these unregistered.</p>
<h3 class='ruffproc'><a name='::cffi::arena pushframe'>arena pushframe</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Pushes a new stack frame on the memory arena.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>arena pushframe</span> <span class='ruff_arg'>?size?</span><br><span class='ruff_cmd'>arena pushframe</span> <span class='ruff_arg'>size ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>sizespec</code></td><td>Requested size of memory block. This may be specified either as an integer value or a type specification (optional)</td></tr>
<tr><td><code>tag</code></td><td>Tag for returned pointer if <code>$size</code> is specified (optional)</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command allocate a new frame in the memory arena stack. All allocations from this frame will stay valid only until the corresponding call to <a href="cffi-cffi.html#::cffi::arena popframe" title="arena popframe" class='ruff_cmd'>arena popframe</a>.</p>
<p class='ruff'>If no arguments are specified, the command initializes an empty frame. Otherwise it allocates storage of <code>$sizespec</code> bytes within the new frame and returns a pointer to it. The size <code>$sizespec</code> may be specified as a positive integer or a CFFI type declaration in which case the memory allocated is that of the type's size.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns an empty string if not arguments were specified or a safe pointer.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::arena allocate" title="arena allocate" class='ruff_cmd'>arena allocate</a>, <a href="cffi-cffi.html#::cffi::arena popframe" title="arena popframe" class='ruff_cmd'>arena popframe</a></p>
<h3 class='ruffproc'><a name='::cffi::call'>call</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Invokes a C function through a function pointer.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>call</span> <span class='ruff_arg'>fnptr ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>fnptr</code></td><td>A pointer value tagged with a <a href="cffi-Concepts.html#::Concepts-Prototypes and function pointers" title="prototype" >prototype</a></td></tr>
<tr><td><code>args</code></td><td>Additional arguments to pass to the C function.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The passed pointer <code>$fnptr</code> tag must corresponding to a function prototype defined through the <a href="cffi-cffi.html#::cffi::prototype function" title="prototype function" class='ruff_cmd'>prototype function</a> or <a href="cffi-cffi.html#::cffi::prototype stdcall" title="prototype stdcall" class='ruff_cmd'>prototype stdcall</a> commands.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the value returned by the invoked C function.</p>
<h3 class='ruffproc'><a name='::cffi::callback'>callback</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>callback</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::callback free" title="free" class='ruff_cmd'>free</a></td><td>Frees a callback pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::callback new" title="new" class='ruff_cmd'>new</a></td><td>Wraps a script level command into a C function.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::callback free'>callback free</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Frees a callback pointer</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>callback free</span> <span class='ruff_arg'>cb</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>cb</code></td><td>A function pointer allocated with <a href="cffi-cffi.html#::cffi::callback new" title="callback new" class='ruff_cmd'>callback new</a></td></tr>
</table>
<h3 class='ruffproc'><a name='::cffi::callback new'>callback new</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Wraps a script level command into a C function</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>callback new</span> <span class='ruff_arg'>protoname cmdprefix error_value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>protoname</code></td><td>The name of a prototype created through the <a href="cffi-cffi.html#::cffi::prototype function" title="prototype function" class='ruff_cmd'>prototype function</a> or <a href="cffi-cffi.html#::cffi::prototype stdcall" title="prototype stdcall" class='ruff_cmd'>prototype stdcall</a> commands.</td></tr>
<tr><td><code>cmdprefix</code></td><td>The command prefix that should be invoked when the created C function is called.</td></tr>
<tr><td><code>error_value</code></td><td>The value that should be returned if the command prefix raises an exception. This is optional if the function prototype specifies the <code>void</code> return type.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned function pointer can be invoked through the <a href="cffi-cffi.html#::cffi::call" title="call" class='ruff_cmd'>call</a> command but the common usage is for it to be passed to a C function that takes a callback function as an argument.</p>
<p class='ruff'>Invoking the function pointer will result in <code>$cmdprefix</code> being called with the additional arguments passed in the invocation. These must match the parameter types of the prototype specified in the callback definition.</p>
<p class='ruff'>The type declarations in a prototypes used for callbacks have certain restrictions. These arise because the &quot;data flow&quot; is now from script to the C shared library.</p>
<p class='ruff'>The parameter and return type are restricted to be scalar values and strings.</p>
<ul class='ruff'>
<li>The <code>out</code>, <code>inout</code> and <code>retval</code> annotations are not permitted. This means any values to be returned to the shared library must be through explicit raw pointers.</li>
<li>All pointer type declarations must have the unsafe annotation. Other pointer safety annotations <code>counted</code>, <code>dispose</code>, <code>disposeonsuccess</code> cannot be specified.</li>
<li>The value checking annotations <code>zero</code>, <code>nonzero</code>, <code>positive</code> and <code>nonnegative</code> cannot be specified for the prototype return type.</li>
<li>The error handling annotations <code>errno</code>, <code>winerror</code>, <code>lasterror</code> and <code>onerror</code> cannot be specified.</li>
<li>The <code>storeonerror</code> and <code>storealways</code> annotations cannot be specified.</li>
</ul>
<p class='ruff'>When <code>$cmdprefix</code> is called from a C function as a callback, it is executed in the Tcl context from which the C function was called and thus has access to the script level local variables etc.</p>
<p class='ruff'>When no longer needed, the callback should be freed with the <a href="cffi-cffi.html#::cffi::callback free" title="callback free" class='ruff_cmd'>callback free</a> command.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a callback function pointer that can be called from C native code.</p>
<h3 class='ruffproc'><a name='::cffi::enum'>enum</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::enum alias" title="alias" class='ruff_cmd'>alias</a></td><td>Defines a new enumeration and alias of the same name.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum clear" title="clear" class='ruff_cmd'>clear</a></td><td>Deletes all enumerations from the interpreter.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum define" title="define" class='ruff_cmd'>define</a></td><td>Defines a new enumeration.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum delete" title="delete" class='ruff_cmd'>delete</a></td><td>Deletes enumerations.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum flags" title="flags" class='ruff_cmd'>flags</a></td><td>Defines an enumeration as bit flags.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum list" title="list" class='ruff_cmd'>list</a></td><td>Lists enumerations.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum mask" title="mask" class='ruff_cmd'>mask</a></td><td>Returns an integer mask formed by bitwise OR-ing the passed enumeration members.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum members" title="members" class='ruff_cmd'>members</a></td><td>Returns a dictionary containing the members in an enumeration.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum name" title="name" class='ruff_cmd'>name</a></td><td>Returns the symbolic name of a value in an enumeration.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum names" title="names" class='ruff_cmd'>names</a></td><td>Returns a list containing the names of members in an enumeration.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum sequence" title="sequence" class='ruff_cmd'>sequence</a></td><td>Defines an enumeration with consecutive member values.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum unmask" title="unmask" class='ruff_cmd'>unmask</a></td><td>Returns a list of enumeration member names corresponding to the bits set in <code>$mask</code>.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::enum value" title="value" class='ruff_cmd'>value</a></td><td>Returns the value of an enumeration member.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::enum alias'>enum alias</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines a new enumeration and alias of the same name</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum alias</span> <span class='ruff_arg'>enumname enumdefs typedecl</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>enumdefs</code></td><td>Dictionary of enumeration member names to their values.</td></tr>
<tr><td><code>typedecl</code></td><td>The type to be used for the alias. Should have an integer base type and may contain other attributes except enum.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The created alias has the same qualified name as the enum and has the corresponding enum attribute.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the fully qualified enumeration name.</p>
<h3 class='ruffproc'><a name='::cffi::enum clear'>enum clear</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Deletes all enumerations from the interpreter</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum clear</span> </div>
<h3 class='ruffproc'><a name='::cffi::enum define'>enum define</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines a new enumeration.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum define</span> <span class='ruff_arg'>enumname enumdefs</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>enumdefs</code></td><td>Dictionary of enumeration member names to their values.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Parameter declarations can reference the enumeration to indicate that the corresponding symbol names are acceptible as arguments and will be replaced by the corresponding value in the function call. Enumeration member values must be integers.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the fully qualified enumeration name.</p>
<h3 class='ruffproc'><a name='::cffi::enum delete'>enum delete</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Deletes enumerations.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum delete</span> <span class='ruff_arg'>pattern</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command deletes all enumerations whose name matches the specified pattern. The conditions for matching the pattern are:</p>
<ul class='ruff'>
<li>the tail of the pattern must match the tail of the enumeration name using Tcl's glob pattern matching rules.</li>
<li>the scope component of the enumeration name must match exactly.</li>
</ul>
<h3 class='ruffproc'><a name='::cffi::enum flags'>enum flags</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines an enumeration as bit flags.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum flags</span> <span class='ruff_arg'>enumname membernames</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>membernames</code></td><td>List of names of the enumeration members.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>For example,</p>
<pre class='ruff'>
enum flags E {A B C}
</pre>
<p class='ruff'>would define an enumeration with <code>A</code>, <code>B</code>, <code>C</code> values being 1, 2 and 4.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the fully qualified enumeration name.</p>
<h3 class='ruffproc'><a name='::cffi::enum list'>enum list</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Lists enumerations.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum list</span> <span class='ruff_arg'>pattern</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command returns the names of all enumerations whose name matches the specified pattern. The conditions for matching the pattern are:</p>
<ul class='ruff'>
<li>the tail of the pattern must match the tail of the enumeration name using Tcl's glob pattern matching rules.</li>
<li>the scope component of the enumeration name must match exactly.</li>
</ul>
<h3 class='ruffproc'><a name='::cffi::enum mask'>enum mask</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns an integer mask formed by bitwise OR-ing the passed enumeration members</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum mask</span> <span class='ruff_arg'>enumname membernames</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration in the current <a href="cffi-Concepts.html#::Concepts-Scopes" title="scope" >scope</a></td></tr>
<tr><td><code>membernames</code></td><td>List of member names and integer values.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns an integer mask formed by bitwise OR-ing the passed enumeration members</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::enum unmask" title="enum unmask" class='ruff_cmd'>enum unmask</a></p>
<h3 class='ruffproc'><a name='::cffi::enum members'>enum members</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a dictionary containing the members in an enumeration.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum members</span> <span class='ruff_arg'>enumname</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration whose elements are to be returned.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary containing the members in an enumeration.</p>
<h3 class='ruffproc'><a name='::cffi::enum name'>enum name</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the symbolic name of a value in an enumeration.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum name</span> <span class='ruff_arg'>enumname membervalue ?default?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>membervalue</code></td><td>Value of an enumeration member.</td></tr>
<tr><td><code>default</code></td><td>Value to be returned if the member value is not found.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command will raise an error if <code>$membervalue</code> is not present in the enumeration and no default is provided, or if <code>$enumname</code> is itself undefined.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the symbolic name of a value in an enumeration.</p>
<h3 class='ruffproc'><a name='::cffi::enum names'>enum names</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list containing the names of members in an enumeration.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum names</span> <span class='ruff_arg'>enumname</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration whose element names are to be returned.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list containing the names of members in an enumeration.</p>
<h3 class='ruffproc'><a name='::cffi::enum sequence'>enum sequence</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines an enumeration with consecutive member values</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum sequence</span> <span class='ruff_arg'>enumname membernames ?start?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>membernames</code></td><td>List of names of the enumeration members.</td></tr>
<tr><td><code>start</code></td><td>Value of first enumeration member. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Each element of <code>$membernames</code> should have one or two elements, the first being the name of the member and the second, if present, being its value.If the second element is not present, the member is assigned a value one greater than the previous value assigned. The first member is assigned value 0 if it has no explicit assigned value.</p>
<p class='ruff'>The <code>$start</code> parameter is present for backward compatibility and indicates the first value to be assigned to the sequence. For future compatibility, the two-element form for the first enum member should be used instead if a starting value other than the default zero is desired.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the fully qualified enumeration name.</p>
<h3 class='ruffproc'><a name='::cffi::enum unmask'>enum unmask</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of enumeration member names corresponding to the bits set in <code>$mask</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum unmask</span> <span class='ruff_arg'>enumname mask</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>mask</code></td><td>Integer bit mask value.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The last element of the returned list is <code>$mask</code> itself. Generally, the enumeration should consist of values that do not have overlapping bits set (commonly a single bit is set in each member value). This is not enforced but results might not be as expected if this condition is not met.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of enumeration member names corresponding to the bits set in <code>$mask</code>.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::enum mask" title="enum mask" class='ruff_cmd'>enum mask</a></p>
<h3 class='ruffproc'><a name='::cffi::enum value'>enum value</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the value of an enumeration member</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>enum value</span> <span class='ruff_arg'>enumname membername ?default?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>enumname</code></td><td>Name of the enumeration.</td></tr>
<tr><td><code>membername</code></td><td>Name of the enumeration member to retrieve.</td></tr>
<tr><td><code>default</code></td><td>Default value to be returned if the membername is not found.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command will raise an error if <code>$membername</code> is not present in the enumeration and no default is provided, or if <code>$enumname</code> is itself undefined.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the value of an enumeration member</p>
<h3 class='ruffproc'><a name='::cffi::help'>help</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::help alias" title="alias" class='ruff_cmd'>alias</a></td><td>Returns a string describing an <a href="cffi-cffi.html#::cffi::alias" title="alias" class='ruff_cmd'>alias</a> definition.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::help enum" title="enum" class='ruff_cmd'>enum</a></td><td>Returns a string describing an <a href="cffi-cffi.html#::cffi::enum" title="enum" class='ruff_cmd'>enum</a> definition.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::help function" title="function" class='ruff_cmd'>function</a></td><td>Returns a string describing the syntax and parameter definitions for a CFFI wrapped function.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::help functions" title="functions" class='ruff_cmd'>functions</a></td><td>Returns a list of CFFI-wrapped functions matching the pattern <code>PATTERN</code>.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::help struct" title="struct" class='ruff_cmd'>struct</a></td><td>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a>.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::help union" title="union" class='ruff_cmd'>union</a></td><td>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Union" title="Union" class='ruff_cmd'>Union</a>.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::help alias'>help alias</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string describing an <a href="cffi-cffi.html#::cffi::alias" title="alias" class='ruff_cmd'>alias</a> definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help alias</span> <span class='ruff_arg'>NAME</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>NAME</code></td><td>Name of a <a href="cffi-cffi.html#::cffi::alias" title="alias" class='ruff_cmd'>alias</a></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string describing an <a href="cffi-cffi.html#::cffi::alias" title="alias" class='ruff_cmd'>alias</a> definition.</p>
<h3 class='ruffproc'><a name='::cffi::help enum'>help enum</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string describing an <a href="cffi-cffi.html#::cffi::enum" title="enum" class='ruff_cmd'>enum</a> definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help enum</span> <span class='ruff_arg'>NAME</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>NAME</code></td><td>Name of a <a href="cffi-cffi.html#::cffi::enum" title="enum" class='ruff_cmd'>enum</a></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string describing an <a href="cffi-cffi.html#::cffi::enum" title="enum" class='ruff_cmd'>enum</a> definition.</p>
<h3 class='ruffproc'><a name='::cffi::help function'>help function</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string describing the syntax and parameter definitions for a CFFI wrapped function.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help function</span> <span class='ruff_arg'>NAME</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>NAME</code></td><td>Name of a wrapped function.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string describing the syntax and parameter definitions for a CFFI wrapped function.</p>
<h3 class='ruffproc'><a name='::cffi::help functions'>help functions</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of CFFI-wrapped functions matching the pattern <code>PATTERN</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help functions</span> <span class='ruff_arg'>?PATTERN?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>PATTERN</code></td><td>Glob pattern to match. Optional, default <code>*</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Note that like Tcl's <code>info commands</code> the pattern is interpreted relative to the current namespace. So for example, to obtain the list of commands within a namespace, the namespace must also be included in the pattern. For example,</p>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
cffi::help functions ::libzip::*
</pre>

</figure><h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of CFFI-wrapped functions matching the pattern <code>PATTERN</code>.</p>
<h3 class='ruffproc'><a name='::cffi::help struct'>help struct</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help struct</span> <span class='ruff_arg'>NAME</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>NAME</code></td><td>Name of a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a>.</p>
<h3 class='ruffproc'><a name='::cffi::help union'>help union</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Union" title="Union" class='ruff_cmd'>Union</a>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>help union</span> <span class='ruff_arg'>NAME</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>NAME</code></td><td>Name of a <a href="cffi-cffi.html#::cffi::Union" title="Union" class='ruff_cmd'>Union</a></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Union" title="Union" class='ruff_cmd'>Union</a>.</p>
<h3 class='ruffproc'><a name='::cffi::limits'>limits</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Get the lower and upper limits for an integral base type</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>limits</span> <span class='ruff_arg'>type</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>type</code></td><td>The base type.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a pair containing the minimum and maximum values for the specified type.</p>
<h3 class='ruffproc'><a name='::cffi::memory'>memory</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::memory allocate" title="allocate" class='ruff_cmd'>allocate</a></td><td>Allocates memory of the specified size.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory fill" title="fill" class='ruff_cmd'>fill</a></td><td>Fills memory with a specified value.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory free" title="free" class='ruff_cmd'>free</a></td><td>Frees the memory referenced by the passed pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory frombinary" title="frombinary" class='ruff_cmd'>frombinary</a></td><td>Allocates memory and copied the passed Tcl binary string into it.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory fromstring" title="fromstring" class='ruff_cmd'>fromstring</a></td><td>Allocates memory and stores a Tcl string in it in the specified encoding.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory fromunistring" title="fromunistring" class='ruff_cmd'>fromunistring</a></td><td>Allocates memory and stores a Tcl string as a sequence of Tcl_UniChars.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory fromwinstring" title="fromwinstring" class='ruff_cmd'>fromwinstring</a></td><td>Allocates memory and stores a Tcl string as a sequence of winchars.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory get" title="get" class='ruff_cmd'>get</a></td><td>Converts a native value in memory into a Tcl script level value.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory get!" title="get!" class='ruff_cmd'>get!</a></td><td>Converts a native value in memory into a Tcl script level value.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory new" title="new" class='ruff_cmd'>new</a></td><td>Allocates memory for a type and initializes it.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory set" title="set" class='ruff_cmd'>set</a></td><td>Converts a value as per a type specification and stores it in memory in native form.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory set!" title="set!" class='ruff_cmd'>set!</a></td><td>Converts a value as per a type specification and stores it in memory in native form.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tobinary" title="tobinary" class='ruff_cmd'>tobinary</a></td><td>Returns the content of a memory block as a Tcl binary string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tobinary!" title="tobinary!" class='ruff_cmd'>tobinary!</a></td><td>Returns the content of a memory block as a Tcl binary string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tostring" title="tostring" class='ruff_cmd'>tostring</a></td><td>Returns the content of a memory block as a Tcl string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tostring!" title="tostring!" class='ruff_cmd'>tostring!</a></td><td>Returns the content of a memory block as a Tcl string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tounistring" title="tounistring" class='ruff_cmd'>tounistring</a></td><td>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory tounistring!" title="tounistring!" class='ruff_cmd'>tounistring!</a></td><td>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory towinstring" title="towinstring" class='ruff_cmd'>towinstring</a></td><td>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::memory towinstring!" title="towinstring!" class='ruff_cmd'>towinstring!</a></td><td>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::memory allocate'>memory allocate</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory of the specified size</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory allocate</span> <span class='ruff_arg'>sizespec ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>sizespec</code></td><td>Requested size of memory block. This may be specified either as an integer value or a type specification.</td></tr>
<tr><td><code>tag</code></td><td>Tag for the returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory new" title="memory new" class='ruff_cmd'>memory new</a>, <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a></p>
<h3 class='ruffproc'><a name='::cffi::memory fill'>memory fill</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Fills memory with a specified value</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory fill</span> <span class='ruff_arg'>pointer bytevalue count ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory.</td></tr>
<tr><td><code>bytevalue</code></td><td>A value in the range <code>0</code>-<code>255</code></td></tr>
<tr><td><code>count</code></td><td>Number of bytes to be fill.</td></tr>
<tr><td><code>offset</code></td><td>Offset from <code>$pointer</code> of area to fill. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h3 class='ruffproc'><a name='::cffi::memory free'>memory free</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Frees the memory referenced by the passed pointer</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory free</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory to free.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The memory must have been allocated using <a href="cffi-cffi.html#::cffi::memory allocate" title="memory allocate" class='ruff_cmd'>memory allocate</a>, <a href="cffi-cffi.html#::cffi::memory frombinary" title="memory frombinary" class='ruff_cmd'>memory frombinary</a>, <a href="cffi-cffi.html#::cffi::memory fromstring" title="memory fromstring" class='ruff_cmd'>memory fromstring</a> or one of the methods of a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a> object. Null pointers are silently ignored.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory allocate" title="memory allocate" class='ruff_cmd'>memory allocate</a></p>
<h3 class='ruffproc'><a name='::cffi::memory frombinary'>memory frombinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory and copied the passed Tcl binary string into it.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory frombinary</span> <span class='ruff_arg'>bin_value ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>bin_value</code></td><td>A Tcl binary value.</td></tr>
<tr><td><code>tag</code></td><td>Tag for the returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tobinary" title="memory tobinary" class='ruff_cmd'>memory tobinary</a>, <a href="cffi-cffi.html#::cffi::memory tobinary!" title="memory tobinary!" class='ruff_cmd'>memory tobinary!</a></p>
<h3 class='ruffproc'><a name='::cffi::memory fromstring'>memory fromstring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory and stores a Tcl string in it in the specified encoding.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory fromstring</span> <span class='ruff_arg'>value ?encoding?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>value</code></td><td>Tcl string value.</td></tr>
<tr><td><code>encoding</code></td><td>The encoding to use for conversion. If unspecified or the empty string, the system encoding is used. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tostring" title="memory tostring" class='ruff_cmd'>memory tostring</a>, <a href="cffi-cffi.html#::cffi::memory tostring!" title="memory tostring!" class='ruff_cmd'>memory tostring!</a></p>
<h3 class='ruffproc'><a name='::cffi::memory fromunistring'>memory fromunistring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory and stores a Tcl string as a sequence of Tcl_UniChars.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory fromunistring</span> <span class='ruff_arg'>value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>value</code></td><td>Tcl string value.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tounistring" title="memory tounistring" class='ruff_cmd'>memory tounistring</a>, <a href="cffi-cffi.html#::cffi::memory tounistring!" title="memory tounistring!" class='ruff_cmd'>memory tounistring!</a></p>
<h3 class='ruffproc'><a name='::cffi::memory fromwinstring'>memory fromwinstring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory and stores a Tcl string as a sequence of winchars.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory fromwinstring</span> <span class='ruff_arg'>value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>value</code></td><td>Tcl string value.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory towinstring" title="memory towinstring" class='ruff_cmd'>memory towinstring</a>, <a href="cffi-cffi.html#::cffi::memory towinstring!" title="memory towinstring!" class='ruff_cmd'>memory towinstring!</a></p>
<h3 class='ruffproc'><a name='::cffi::memory get'>memory get</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts a native value in memory into a Tcl script level value</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory get</span> <span class='ruff_arg'>pointer typespec ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Base address of memory location. The pointer must be a safe pointer but the tag is immaterial.</td></tr>
<tr><td><code>typespec</code></td><td>Type specification to use for conversion.</td></tr>
<tr><td><code>index</code></td><td>The index in memory from which value is to be retrieved. Care must be taken this is within bounds of the allocated space. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command converts the data at a memory location into a Tcl script object as per the type specification <code>$typespec</code>. The memory address of the data is given by <code>$pointer</code> if <code>$index</code> is unspecified or <code>0</code>. Otherwise <code>$index</code> is treated as an index into an array based at <code>$pointer</code> whose elements are of the type defined by <code>$typespec</code> and memory address used is that of the slot given by <code>$index</code>. For example, if <code>$typespec</code> is <code>int</code> and <code>$index</code> is 2, the memory address from which the value is read is at byte offset 8 assuming ints occupy 4 bytes. If <code>$typespec</code> is <code>int[3]</code>, then the size of the type specification is 12, and an index of 2 will correspond to a byte offset of 24, not 8. Be aware of these semantics when reading arrays using non-0 indices.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory get!" title="memory get!" class='ruff_cmd'>memory get!</a>, <a href="cffi-cffi.html#::cffi::memory set" title="memory set" class='ruff_cmd'>memory set</a></p>
<h3 class='ruffproc'><a name='::cffi::memory get!'>memory get!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts a native value in memory into a Tcl script level value</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory get!</span> <span class='ruff_arg'>pointer typespec ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Base address of memory location. The pointer is not checked for validity.</td></tr>
<tr><td><code>typespec</code></td><td>Type specification to use for conversion.</td></tr>
<tr><td><code>index</code></td><td>The index in memory from which value is to be retrieved. Care must be taken this is within bounds of the allocated space. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>This command is identical to the <a href="cffi-cffi.html#::cffi::memory get" title="memory get" class='ruff_cmd'>memory get</a> command except that it does not require <code>$pointer</code> to be a safe pointer. See the documentation of that command for details.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory get" title="memory get" class='ruff_cmd'>memory get</a>, <a href="cffi-cffi.html#::cffi::memory set" title="memory set" class='ruff_cmd'>memory set</a></p>
<h3 class='ruffproc'><a name='::cffi::memory new'>memory new</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory for a type and initializes it.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory new</span> <span class='ruff_arg'>typespec initializer ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>typespec</code></td><td>A type declaration.</td></tr>
<tr><td><code>initializer</code></td><td>The type-specific value to use to initialize allocated memory.</td></tr>
<tr><td><code>tag</code></td><td>The optional tag for the returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$typespec</code> argument may be any type specificiation. If an array is specified of a larger size than the number of elements in <code>$initializer</code>, the remaining elements are zeroed out.</p>
<p class='ruff'>The returned memory must be eventually freed by calling <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory allocate" title="memory allocate" class='ruff_cmd'>memory allocate</a>, <a href="cffi-cffi.html#::cffi::memory free" title="memory free" class='ruff_cmd'>memory free</a></p>
<h3 class='ruffproc'><a name='::cffi::memory set'>memory set</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts a value as per a type specification and stores it in memory in native form</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory set</span> <span class='ruff_arg'>pointer typespec value ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Base address of memory location. The pointer must be a safe pointer but the tag is immaterial.</td></tr>
<tr><td><code>typespec</code></td><td>Type specification.</td></tr>
<tr><td><code>value</code></td><td>The script level value to be stored.</td></tr>
<tr><td><code>index</code></td><td>The index in memory at which the value is to be stored. Care must be taken this is within bounds of the allocated space. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command converts <code>$value</code> into the native form corresponding to the type specification <code>$typespec</code>. If <code>$index</code> is unspecified or <code>0</code>, the native value is stored at the memory address given by <code>$pointer</code>. Otherwise <code>$index</code> is the treated as an index into an array whose elements are of the type defined by <code>$typespec</code> and the value is stored in the slot given by <code>$index</code>. For example, if <code>$typespec</code> is <code>int</code> and <code>$index</code> is 2, the memory address at which the value is written is at byte offset 8 assuming ints occupy 4 bytes. If <code>$typespec</code> is <code>int[3]</code>, then the size of the type specification is 12, and an index of 2 will correspond to a byte offset of 24, not 8. Be aware of these semantics when writing arrays to non-0 indices to avoid memory corruption.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory get" title="memory get" class='ruff_cmd'>memory get</a>, <a href="cffi-cffi.html#::cffi::memory set!" title="memory set!" class='ruff_cmd'>memory set!</a></p>
<h3 class='ruffproc'><a name='::cffi::memory set!'>memory set!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts a value as per a type specification and stores it in memory in native form</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory set!</span> <span class='ruff_arg'>pointer typespec value ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Base address of memory location. The pointer is not checked for validity.</td></tr>
<tr><td><code>typespec</code></td><td>Type specification.</td></tr>
<tr><td><code>value</code></td><td>The script level value to be stored.</td></tr>
<tr><td><code>index</code></td><td>The index in memory at which the value is to be stored. Care must be taken this is within bounds of the allocated space. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>This command is identical to the <a href="cffi-cffi.html#::cffi::memory set" title="memory set" class='ruff_cmd'>memory set</a> command except that it does not require <code>$pointer</code> to be a safe pointer. See the documentation of that command for details.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory get" title="memory get" class='ruff_cmd'>memory get</a>, <a href="cffi-cffi.html#::cffi::memory set" title="memory set" class='ruff_cmd'>memory set</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tobinary'>memory tobinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block as a Tcl binary string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tobinary</span> <span class='ruff_arg'>pointer size ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory.</td></tr>
<tr><td><code>size</code></td><td>Number of bytes to copy from the memory block.</td></tr>
<tr><td><code>offset</code></td><td>Offset from <code>$pointer</code> of area to value. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block as a Tcl binary string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tobinary!" title="memory tobinary!" class='ruff_cmd'>memory tobinary!</a>, <a href="cffi-cffi.html#::cffi::memory frombinary" title="memory frombinary" class='ruff_cmd'>memory frombinary</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tobinary!'>memory tobinary!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block as a Tcl binary string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tobinary!</span> <span class='ruff_arg'>pointer size ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory.</td></tr>
<tr><td><code>size</code></td><td>Number of bytes to copy from the memory block.</td></tr>
<tr><td><code>offset</code></td><td>Offset from <code>$pointer</code> of area to value. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Unlike the <a href="cffi-cffi.html#::cffi::memory tobinary" title="memory tobinary" class='ruff_cmd'>memory tobinary</a> method, this does not check the validity of <code>$pointer</code> and should be used with care.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block as a Tcl binary string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tobinary" title="memory tobinary" class='ruff_cmd'>memory tobinary</a>, <a href="cffi-cffi.html#::cffi::memory frombinary" title="memory frombinary" class='ruff_cmd'>memory frombinary</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tostring'>memory tostring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tostring</span> <span class='ruff_arg'>pointer ?encoding? ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory.</td></tr>
<tr><td><code>encoding</code></td><td>The encoding to use for conversion. If unspecified or the empty string, the system encoding is used. Optional, default <code>&quot;&quot;</code>.</td></tr>
<tr><td><code>offset</code></td><td>Offset from <code>$pointer</code> of area to value. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tostring!" title="memory tostring!" class='ruff_cmd'>memory tostring!</a>, <a href="cffi-cffi.html#::cffi::memory fromstring" title="memory fromstring" class='ruff_cmd'>memory fromstring</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tostring!'>memory tostring!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tostring!</span> <span class='ruff_arg'>pointer ?encoding? ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory. Need not be a safe pointer.</td></tr>
<tr><td><code>encoding</code></td><td>The encoding to use for conversion. If unspecified or the empty string, the system encoding is used. Optional, default <code>&quot;&quot;</code>.</td></tr>
<tr><td><code>offset</code></td><td>Offset from <code>$pointer</code> of area to value. May be negative. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Unlike the <a href="cffi-cffi.html#::cffi::memory tostring" title="memory tostring" class='ruff_cmd'>memory tostring</a> method, this does not check the validity of <code>$pointer</code> and should be used with care.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tostring!" title="memory tostring!" class='ruff_cmd'>memory tostring!</a>, <a href="cffi-cffi.html#::cffi::memory fromstring" title="memory fromstring" class='ruff_cmd'>memory fromstring</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tounistring'>memory tounistring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tounistring</span> <span class='ruff_arg'>pointer ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory.</td></tr>
<tr><td><code>offset</code></td><td>Offset in Tcl_UniChar units from <code>$pointer</code> of area to value. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tounistring!" title="memory tounistring!" class='ruff_cmd'>memory tounistring!</a>, <a href="cffi-cffi.html#::cffi::memory fromunistring" title="memory fromunistring" class='ruff_cmd'>memory fromunistring</a></p>
<h3 class='ruffproc'><a name='::cffi::memory tounistring!'>memory tounistring!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory tounistring!</span> <span class='ruff_arg'>pointer ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory. Need not be a safe pointer.</td></tr>
<tr><td><code>offset</code></td><td>Offset in Tcl_UniChar units from <code>$pointer</code> of area to value. May be negative. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory tounistring" title="memory tounistring" class='ruff_cmd'>memory tounistring</a>, <a href="cffi-cffi.html#::cffi::memory fromunistring" title="memory fromunistring" class='ruff_cmd'>memory fromunistring</a></p>
<h3 class='ruffproc'><a name='::cffi::memory towinstring'>memory towinstring</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory towinstring</span> <span class='ruff_arg'>pointer ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory.</td></tr>
<tr><td><code>offset</code></td><td>Offset in WCHAR units from <code>$pointer</code> of area to value. May be negative for unsafe pointers. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory towinstring!" title="memory towinstring!" class='ruff_cmd'>memory towinstring!</a>, <a href="cffi-cffi.html#::cffi::memory fromwinstring" title="memory fromwinstring" class='ruff_cmd'>memory fromwinstring</a></p>
<h3 class='ruffproc'><a name='::cffi::memory towinstring!'>memory towinstring!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>memory towinstring!</span> <span class='ruff_arg'>pointer ?offset?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory. Need not be a safe pointer.</td></tr>
<tr><td><code>offset</code></td><td>Offset in WCHAR units from <code>$pointer</code> of area to value. May be negative. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::memory towinstring!" title="memory towinstring!" class='ruff_cmd'>memory towinstring!</a>, <a href="cffi-cffi.html#::cffi::memory fromwinstring" title="memory fromwinstring" class='ruff_cmd'>memory fromwinstring</a></p>
<h3 class='ruffproc'><a name='::cffi::pkgconfig'>pkgconfig</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pkgconfig</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::pkgconfig get" title="get" class='ruff_cmd'>get</a></td><td>Gets the value of a configuration key.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pkgconfig list" title="list" class='ruff_cmd'>list</a></td><td>Returns the list of keys containing information about the package configuration.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::pkgconfig get'>pkgconfig get</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Gets the value of a configuration key.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pkgconfig get</span> <span class='ruff_arg'>key</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>key</code></td><td>One of the keys returned by <a href="cffi-cffi.html#::cffi::pkgconfig list" title="pkgconfig list" class='ruff_cmd'>pkgconfig list</a> command.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The following keys are supported.</p>
<table class='ruff_deflist'>
<tr><td><code>backend</code></td><td>Returns <code>libffi</code> or <code>dyncall</code> indicating the backend FFI library in use.</td></tr>
<tr><td><code>version</code></td><td>The package version.</td></tr>
<tr><td><code>compiler</code></td><td>Identifies the compiler used to build the extension.</td></tr>
</table>
<h3 class='ruffproc'><a name='::cffi::pkgconfig list'>pkgconfig list</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the list of keys containing information about the package configuration.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pkgconfig list</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the list of keys containing information about the package configuration.</p>
<h3 class='ruffproc'><a name='::cffi::pointer'>pointer</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::pointer address" title="address" class='ruff_cmd'>address</a></td><td>Returns the address component of the pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer cast" title="cast" class='ruff_cmd'>cast</a></td><td>Casts a pointer to a new tag.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer castable" title="castable" class='ruff_cmd'>castable</a></td><td>Specifies that pointers with tag <code>$subtag</code> are acceptable in declarations that require <code>$supertag</code>.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer castables" title="castables" class='ruff_cmd'>castables</a></td><td>Returns a list of tags that have been marked as castable with the <a href="cffi-cffi.html#::cffi::pointer castable" title="pointer castable" class='ruff_cmd'>pointer castable</a> command..</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer check" title="check" class='ruff_cmd'>check</a></td><td>Validates a pointer and raise an exception if invalid.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer compare" title="compare" class='ruff_cmd'>compare</a></td><td>Compares if two pointers are the same.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer counted" title="counted" class='ruff_cmd'>counted</a></td><td>Registers a pointer as a counted pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer dispose" title="dispose" class='ruff_cmd'>dispose</a></td><td>Unregisters a safe or counted pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer info" title="info" class='ruff_cmd'>info</a></td><td>Returns a dictionary containing registration information about a pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer invalidate" title="invalidate" class='ruff_cmd'>invalidate</a></td><td>Unregisters a safe, counted or pinned pointer irrespective its reference count.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer isnull" title="isnull" class='ruff_cmd'>isnull</a></td><td>Returns true if the pointer is a NULL pointer, false otherwise.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer isvalid" title="isvalid" class='ruff_cmd'>isvalid</a></td><td>Validates a pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer list" title="list" class='ruff_cmd'>list</a></td><td>Returns a list of registered pointers optionally filtered by a tag.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer make" title="make" class='ruff_cmd'>make</a></td><td>Return a pointer for a memory address.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer pin" title="pin" class='ruff_cmd'>pin</a></td><td>Pins a pointer as permanently safe.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer safe" title="safe" class='ruff_cmd'>safe</a></td><td>Registers a pointer as a safe uncounted pointer.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer tag" title="tag" class='ruff_cmd'>tag</a></td><td>Returns the pointer tag.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::pointer uncastable" title="uncastable" class='ruff_cmd'>uncastable</a></td><td>Makes pointers with the specified tag uncastable to another type.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::pointer address'>pointer address</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the address component of the pointer.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer address</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer whose address component is to be returned.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the address component of the pointer.</p>
<h3 class='ruffproc'><a name='::cffi::pointer cast'>pointer cast</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Casts a pointer to a new tag.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer cast</span> <span class='ruff_arg'>pointer ?TAG?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be cast.</td></tr>
<tr><td><code>tag</code></td><td>New tag to apply. This will be qualified with the current scope if not fully qualified.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The cast will fail if the <code>TAG</code> is not castable to or from the pointer's tag. See <a href="cffi-Concepts.html#::Concepts-Casting pointers" title="Casting pointers" >Casting pointers</a>. In addition, the cast will fail if the pointer is registered as a safe pointer and the pointer's tag is not castable to the tag in the registration.</p>
<p class='ruff'>If <code>TAG</code> is not specified, any existing tag is removed from the pointer (effectively marking it as a <code>void*</code> pointer).</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a pointer with the same address and new tag</p>
<h3 class='ruffproc'><a name='::cffi::pointer castable'>pointer castable</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Specifies that pointers with tag <code>$subtag</code> are acceptable in declarations that require <code>$supertag</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer castable</span> <span class='ruff_arg'>subtags supertag</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>subtags</code></td><td>List of tags which are acceptable wherever <code>$supertag</code> is expected. Will be qualified with current scope if necessary.</td></tr>
<tr><td><code>supertag</code></td><td>Tag which should accept <code>$subtag</code> tagged pointers. Will be qualified with current scope if necessary.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Casting pointers" title="Casting pointers" >Casting pointers</a> for more information.</p>
<h3 class='ruffproc'><a name='::cffi::pointer castables'>pointer castables</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of tags that have been marked as castable with the <a href="cffi-cffi.html#::cffi::pointer castable" title="pointer castable" class='ruff_cmd'>pointer castable</a> command..</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer castables</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of tags that have been marked as castable with the <a href="cffi-cffi.html#::cffi::pointer castable" title="pointer castable" class='ruff_cmd'>pointer castable</a> command..</p>
<h3 class='ruffproc'><a name='::cffi::pointer check'>pointer check</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Validates a pointer and raise an exception if invalid.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer check</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be validated.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>For a pointer to be treated as valid,</p>
<ul class='ruff'>
<li>it must not be NULL</li>
<li>it must be registered</li>
<li>if it is tagged, the tag must be the same as that of the registration or implicitly castable to it.</li>
</ul>
<p class='ruff'>If any of the above conditions is not met, an error exception is raised. Note that if <code>$pointer</code> is untagged, the tag of the registration is not checked.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer safety and registration.</p>
<h3 class='ruffproc'><a name='::cffi::pointer compare'>pointer compare</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Compares if two pointers are the same</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer compare</span> <span class='ruff_arg'>ptr1 ptr2</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>ptr1</code></td><td>The first pointer to compare.</td></tr>
<tr><td><code>ptr2</code></td><td>The second pointer to compare.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns 1 if both address and tag components match, -1 if address matches but tags are different and 0 otherwise.</p>
<h3 class='ruffproc'><a name='::cffi::pointer counted'>pointer counted</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Registers a pointer as a counted pointer</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer counted</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be registered.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In the case that the pointer is already registered, behavior depends on the existing registration:</p>
<ul class='ruff'>
<li>If the pointer is already registered as a pinned pointer, the command has no effect.</li>
<li>If the pointer is already registered as a counted pointer, the command has no effect if the tag is the same as the registered tag or can be implicitly cast to it. Otherwise the registered tag is replaced.</li>
<li>If the pointer is registered as an uncounted pointer, the registration, including tag, is overwritten as a counted pointer with a reference count of 1.</li>
</ul>
<p class='ruff'>In the case that the pointer is registered with a different tag, if the pointer tag cannot be implicitly cast to the registered tag, the registered tag is replaced by the pointer tag.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on counted pointers and registration.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the registered pointer.</p>
<h3 class='ruffproc'><a name='::cffi::pointer dispose'>pointer dispose</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Unregisters a safe or counted pointer</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer dispose</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be unregistered.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Note that the command only unregisters the pointer. It does not do anything in terms of releases any resources associated with the pointer.</p>
<p class='ruff'>An error is raised if the pointer is not registered unless it is a null pointer in which case it is ignored without error.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer safety and registration.</p>
<h3 class='ruffproc'><a name='::cffi::pointer info'>pointer info</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a dictionary containing registration information about a pointer.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer info</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer for which registration information is required.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned dictionary always contains the keys <code>Tag</code> containing the pointer tag and <code>Registration</code> containing one of the values <code>none</code>, <code>safe</code>, <code>pinned</code> or <code>counted</code>. If the <code>Registration</code> value is not <code>unregistered</code>, the dictionary contains the additional keys <code>RegisteredTag</code>, holding the tag of the pointer in the registry, and <code>Match</code> which may have one of the values <code>exact</code>, <code>derived</code> or <code>mismatch</code>.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary containing registration information about a pointer.</p>
<h3 class='ruffproc'><a name='::cffi::pointer invalidate'>pointer invalidate</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Unregisters a safe, counted or pinned pointer irrespective its reference count.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer invalidate</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be unregistered.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Note that the command only unregisters the pointer. It does not do anything in terms of releases any resources associated with the pointer.</p>
<p class='ruff'>The command differs from <a href="cffi-cffi.html#::cffi::pointer dispose" title="pointer dispose" class='ruff_cmd'>pointer dispose</a> in that</p>
<ul class='ruff'>
<li>it unregisters a counted pointer even if its reference count was greater than 1.</li>
<li>it unregisters pinned pointers</li>
<li>it does not raise an error for null pointers</li>
</ul>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer safety and registration.</p>
<h3 class='ruffproc'><a name='::cffi::pointer isnull'>pointer isnull</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns true if the pointer is a NULL pointer, false otherwise.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer isnull</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be checked.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns true if the pointer is a NULL pointer, false otherwise.</p>
<h3 class='ruffproc'><a name='::cffi::pointer isvalid'>pointer isvalid</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Validates a pointer.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer isvalid</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be validated.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>For a pointer to be treated as valid,</p>
<ul class='ruff'>
<li>it must not be NULL</li>
<li>it must be registered</li>
<li>if it is tagged, the tag must be the same as that of the registration or implicitly castable to it.</li>
</ul>
<p class='ruff'>Return a boolean true value if all the above conditions are met, otherwise false.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer safety and registration.</p>
<h3 class='ruffproc'><a name='::cffi::pointer list'>pointer list</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of registered pointers optionally filtered by a tag.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer list</span> <span class='ruff_arg'>?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>tag</code></td><td>If specified, only pointers matching the tag are returned. If <code>tag</code> is the empty string, only pointers without a tag are returned.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of registered pointers optionally filtered by a tag.</p>
<h3 class='ruffproc'><a name='::cffi::pointer make'>pointer make</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Return a pointer for a memory address.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer make</span> <span class='ruff_arg'>address ?tag?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>address</code></td><td>Memory address as a positive integer.</td></tr>
<tr><td><code>tag</code></td><td>If not fully qualified, this will be qualified with the current namespace name. An empty tag is treated as if it was unspecified.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned pointer is not registered as safe. The caller can use the <a href="cffi-cffi.html#::cffi::pointer safe" title="pointer safe" class='ruff_cmd'>pointer safe</a> command to mark it as such if so desired.</p>
<h3 class='ruffproc'><a name='::cffi::pointer pin'>pointer pin</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Pins a pointer as permanently safe.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer pin</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be pinned. This may or may not be already registered.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Once a pointer is pinned, it is unaffected by any <a href="cffi-cffi.html#::cffi::pointer safe" title="pointer safe" class='ruff_cmd'>pointer safe</a>, <a href="cffi-cffi.html#::cffi::pointer counted" title="pointer counted" class='ruff_cmd'>pointer counted</a> or <a href="cffi-cffi.html#::cffi::pointer dispose" title="pointer dispose" class='ruff_cmd'>pointer dispose</a> calls. It can however be invalidated by <a href="cffi-cffi.html#::cffi::pointer invalidate" title="pointer invalidate" class='ruff_cmd'>pointer invalidate</a>.</p>
<p class='ruff'>A pinned pointer has no associated tag even if the passed pointer has one. It will thus match any pointer with the same address component irrespective of the tag. The primary use of pinned pointers is to deal with &quot;pseudo handles&quot; in the Windows API.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns <code>$pointer</code> itself.</p>
<h3 class='ruffproc'><a name='::cffi::pointer safe'>pointer safe</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Registers a pointer as a safe uncounted pointer.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer safe</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to be registered.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In the case that the pointer is already registered, behavior depends on the existing registration:</p>
<ul class='ruff'>
<li>If the pointer is already registered as a pinned pointer, the command has no effect.</li>
<li>If the pointer is already registered as a safe (uncounted) pointer the command has no effect if the tag is the same as the registered tag or can be implicitly cast to it. Otherwise the registered tag is replaced.</li>
<li>If the pointer is registered as a counted pointer, the registration, including tag, is overwritten.</li>
</ul>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer safety and registration.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the registered pointer.</p>
<h3 class='ruffproc'><a name='::cffi::pointer tag'>pointer tag</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the pointer tag</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer tag</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer whose tag is to be returned.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>An empty string is returned if the pointer is not tagged.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Pointers" title="Pointers" >Pointers</a> for more on pointer tags.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the pointer tag</p>
<h3 class='ruffproc'><a name='::cffi::pointer uncastable'>pointer uncastable</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Makes pointers with the specified tag uncastable to another type</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>pointer uncastable</span> <span class='ruff_arg'>tag</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>tag</code></td><td>A pointer tag Pointers tagged with <code>$tag</code> will no longer be castable to other tags that were configured with the <a href="cffi-cffi.html#::cffi::pointer castables" title="pointer castables" class='ruff_cmd'>pointer castables</a> command.</td></tr>
</table>
<h3 class='ruffproc'><a name='::cffi::prototype'>prototype</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>prototype</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::prototype delete" title="delete" class='ruff_cmd'>delete</a></td><td>Deletes prototypes matching a pattern.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::prototype function" title="function" class='ruff_cmd'>function</a></td><td>Defines a function prototype for calling a function using the default C calling convention.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::prototype list" title="list" class='ruff_cmd'>list</a></td><td>Returns a list of prototypes matching the specified pattern.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::prototype stdcall" title="stdcall" class='ruff_cmd'>stdcall</a></td><td>Defines a function prototype for calling a function using the stdcall calling convention.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::prototype delete'>prototype delete</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Deletes prototypes matching a pattern.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>prototype delete</span> <span class='ruff_arg'>pattern</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The pattern matching algorithm is the same as that of Tcl's <code>string match</code> command. It is not an error if the pattern does not match any prototypes.</p>
<h3 class='ruffproc'><a name='::cffi::prototype function'>prototype function</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines a function prototype for calling a function using the default C calling convention.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>prototype function</span> <span class='ruff_arg'>name fntype parameters</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>name</code></td><td>Name for the prototype. Must begin with an alphabetic character and may contain alphanumerics and underscore.</td></tr>
<tr><td><code>fntype</code></td><td>The type definition for the return value from the function.</td></tr>
<tr><td><code>parameters</code></td><td>List of alternating parameter name and type definitions.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$fntype</code> and <code>$parameters</code> take the same form and have the same semantics as described for the <a href="cffi-cffi.html#::cffi::Wrapper::function" title="Wrapper.function" class='ruff_cmd'>Wrapper.function</a> method for defining functions. However, unlike that method, this command does not create a command for invoking a C function. It only defines a prototype that can then be used in conjunction with a C function address to invoke that function.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Prototypes and function pointers" title="Prototypes and function pointers" >Prototypes and function pointers</a> for more details.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Wrapper::function" title="Wrapper.function" class='ruff_cmd'>Wrapper.function</a></p>
<h3 class='ruffproc'><a name='::cffi::prototype list'>prototype list</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a list of prototypes matching the specified pattern.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>prototype list</span> <span class='ruff_arg'>?pattern?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pattern</code></td><td>Pattern to match. Optional, default <code>*</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The pattern matching algorithm is the same as that of Tcl's <code>string match</code> command.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of prototypes matching the specified pattern.</p>
<h3 class='ruffproc'><a name='::cffi::prototype stdcall'>prototype stdcall</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Defines a function prototype for calling a function using the stdcall calling convention.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>prototype stdcall</span> <span class='ruff_arg'>name fntype parameters</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>name</code></td><td>Name for the prototype. Must begin with an alphabetic character and may contain alphanumerics and underscore.</td></tr>
<tr><td><code>fntype</code></td><td>The type definition for the return value from the function.</td></tr>
<tr><td><code>parameters</code></td><td>List of alternating parameter name and type definitions.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$fntype</code> and <code>$parameters</code> take the same form and have the same semantics as described for the <a href="cffi-cffi.html#::cffi::Wrapper::stdcall" title="Wrapper.stdcall" class='ruff_cmd'>Wrapper.stdcall</a> method for defining functions. However, unlike that method, this command does not create a command for invoking a C function. It only defines a prototype that can then be used in conjunction with a C function address to invoke that function.</p>
<p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Prototypes and function pointers" title="Prototypes and function pointers" >Prototypes and function pointers</a> for more details.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Wrapper::stdcall" title="Wrapper.stdcall" class='ruff_cmd'>Wrapper.stdcall</a></p>
<h3 class='ruffproc'><a name='::cffi::savederrors'>savederrors</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Return <code>errno</code> and <code>GetLastError()</code> values from the last CFFI call annotated with <code>saveerrors</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>savederrors</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>For functions annotated with <code>saveerrors</code>, CFFI internally saves the <code>errno</code> and (on Windows) <code>GetLastError()</code> values. The <code>savederrors</code> command retrieves these as a pair with the first element being the saved <code>errno</code> value and the second the <code>GetLastError()</code> result. The latter is always 0 on non-Windows platforms.</p>
<h3 class='ruffproc'><a name='::cffi::type'>type</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>A command ensemble.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type</span> <span class='ruff_arg'>subcommand ...</span></div>
<h5 class='ruff'>Description</h5><p class='ruff'>The ensemble supports the following subcommands:</p>
<table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::type count" title="count" class='ruff_cmd'>count</a></td><td>Returns the count of elements in an array type.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::type frombinary" title="frombinary" class='ruff_cmd'>frombinary</a></td><td>Converts the native binary value to its script level representation.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::type info" title="info" class='ruff_cmd'>info</a></td><td>Returns a dictionary containing various information about a type declaration.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::type size" title="size" class='ruff_cmd'>size</a></td><td>Returns the size of a type in terms of the number of bytes of memory occupied by that type.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::type tobinary" title="tobinary" class='ruff_cmd'>tobinary</a></td><td>Converts a script level value to a native representation.</td></tr>
</table>
<p class='ruff'>Refer to the documentation of each subcommand for details.</p>
<h3 class='ruffproc'><a name='::cffi::type count'>type count</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the count of elements in an array type</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type count</span> <span class='ruff_arg'>type</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>type</code></td><td>A type definition or alias.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>A return value of <code>-1</code> indicates the type is not an array.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the count of elements in an array type</p>
<h3 class='ruffproc'><a name='::cffi::type frombinary'>type frombinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts the native binary value to its script level representation.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type frombinary</span> <span class='ruff_arg'>typespec value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>typespec</code></td><td>A type declaration.</td></tr>
<tr><td><code>value</code></td><td>The native binary value.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$typespec</code> argument may be any type specification.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the script level representation of the value.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::type tobinary" title="type tobinary" class='ruff_cmd'>type tobinary</a></p>
<h3 class='ruffproc'><a name='::cffi::type info'>type info</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns a dictionary containing various information about a type declaration</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type info</span> <span class='ruff_arg'>typedecl ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>typedecl</code></td><td>A type declaration.</td></tr>
<tr><td><code>-parsemode MODE</code></td><td>One of <code>param</code>, <code>return</code>, <code>field</code>.</td></tr>
<tr><td><code>-vlacount VLACOUNT</code></td><td>Number of elements in variable size array.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The type is parsed as a parameter type declaration, a function return type declaration or a structure field type declaration depending on the <code>-parsemode</code> option. If this is unspecified or an empty string, it is parsed in generic fashion and no context-specific validation is done.</p>
<p class='ruff'>The option <code>-vlacount</code> must be specified if the type is variable length array or a struct that contains a variable length array</p>
<p class='ruff'>The returned dictionary contains the following keys:</p>
<table class='ruff_deflist'>
<tr><td>Alignment</td><td>The memory alignment needed for a value of that type.</td></tr>
<tr><td>BaseSize</td><td>The number of bytes to store a single value of the type when the type is an array. For scalars, same as <code>Size</code>.</td></tr>
<tr><td>Count</td><td><code>-1</code> for scalar values, else indicates the type is an array with that number of elements.</td></tr>
<tr><td>Size</td><td>The number of bytes of memory needed to store a value of that type.</td></tr>
<tr><td>Definition</td><td>The type declaration after applying any defaults. For type aliases, this is the resolved type definition.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary containing various information about a type declaration</p>
<h3 class='ruffproc'><a name='::cffi::type size'>type size</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Returns the size of a type in terms of the number of bytes of memory occupied by that type.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type size</span> <span class='ruff_arg'>type ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>type</code></td><td>A type definition or alias.</td></tr>
<tr><td><code>-vlacount VLACOUNT</code></td><td>Number of elements in variable size array.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In the case of array types, the size includes the size of the entire array and not the size of a single element.</p>
<p class='ruff'>The option <code>-vlacount</code> must be specified if the type is variable length array or a struct that contains a variable length array</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the size of a type in terms of the number of bytes of memory occupied by that type.</p>
<h3 class='ruffproc'><a name='::cffi::type tobinary'>type tobinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Converts a script level value to a native representation.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>type tobinary</span> <span class='ruff_arg'>typespec value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>typespec</code></td><td>A type declaration.</td></tr>
<tr><td><code>value</code></td><td>The script level value.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The <code>$typespec</code> argument must not have a string or variable size component. If an array is specified of a larger size than the number of elements in <code>$value</code>, the remaining elements are zeroed out.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a Tcl binary containing the native representation.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::type frombinary" title="type frombinary" class='ruff_cmd'>type frombinary</a></p>
<h2 class='ruff'><a name='::cffi-Classes'></a>Classes<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h2>
<div style='clear:both;'></div>
<h3 class='ruffclass'><a name='::cffi::Interface'>Interface</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::Interface::constructor" title="constructor" class='ruff_cmd'>constructor</a></td><td>Constructor for the class.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Interface::id" title="id" class='ruff_cmd'>id</a></td><td>Returns the id for the interface as passed via the <code>-id</code> option in the interface definition.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Interface::methods" title="methods" class='ruff_cmd'>methods</a></td><td>Creates Tcl commands wrapping the C functions comprising an interface.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Interface::stdmethods" title="stdmethods" class='ruff_cmd'>stdmethods</a></td><td>Creates Tcl commands corresponding to the C functions comprising an interface.</td></tr>
</table>
<h4 class='ruffmethod'><a name='::cffi::Interface::constructor'>constructor</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Interface" title="::cffi::Interface" class='ruff_cmd'>::cffi::Interface</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Interface'>Interface</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Defines an interface consisting of method definitions.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Interface create OBJNAME</span> <span class='ruff_arg'>?args?</span><br><span class='ruff_cmd'>Interface new</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>-id ID</code></td><td>An id to be associated with the interface. This is for the caller's use and CFFI does not make any use of it. For COM, this can be used to associate the GUID or IID for the interface. Defaults to the empty string.</td></tr>
<tr><td><code>-inherit BASEINTERFACE</code></td><td>If specified, the interface inherits methods from <code>BASEINTERFACE</code>. An empty value for <code>BASEINTERFACE</code> is treated as though the option was not specified.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>See <a href="cffi-Concepts.html#::Concepts-Interfaces" title="Interfaces" >Interfaces</a> for more information.</p>
<h4 class='ruffmethod'><a name='::cffi::Interface::id'>id</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Interface" title="::cffi::Interface" class='ruff_cmd'>::cffi::Interface</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Interface'>Interface</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the id for the interface as passed via the <code>-id</code> option in the interface definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT id</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the id for the interface as passed via the <code>-id</code> option in the interface definition.</p>
<h4 class='ruffmethod'><a name='::cffi::Interface::methods'>methods</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Interface" title="::cffi::Interface" class='ruff_cmd'>::cffi::Interface</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Interface'>Interface</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates Tcl commands wrapping the C functions comprising an interface.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT methods</span> <span class='ruff_arg'>methodlist ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>methodlist</code></td><td>List of function definitions.</td></tr>
<tr><td><code>-disposemethod METHODNAMDE</code></td><td>The name of the method, if any, whose implicit pointer parameter should be annotated with <code>dispose</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The C functions in the wrapper are presumed to be using the <code>_cdecl</code> calling convention. The created commands are of the form <code>INTERFACENAME.METHODNAME</code>. The first argument to each is typed as <code>pointer.INTERFACENAME</code>.</p>
<p class='ruff'>The order of the methods in <code>$methodlist</code> must be the same as that in the corresponding C interface. All functions in the interface are expected to have a pointer to the interface as the first parameter.</p>
<p class='ruff'>The <code>$methodlist</code> argument is a flat (not nested) list of function name, return type and parameter list in the same form as described for the <a href="cffi-cffi.html#::cffi::Wrapper::function" title="::cffi::Wrapper::function" class='ruff_cmd'>::cffi::Wrapper::function</a> method except that the first parameter in the C function, the pointer to the object, should not be included.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Interface::stdmethods" title="stdmethods" class='ruff_cmd'>stdmethods</a></p>
<h4 class='ruffmethod'><a name='::cffi::Interface::stdmethods'>stdmethods</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Interface" title="::cffi::Interface" class='ruff_cmd'>::cffi::Interface</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Interface'>Interface</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates Tcl commands corresponding to the C functions comprising an interface.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT stdmethods</span> <span class='ruff_arg'>methodlist ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>methodlist</code></td><td>List of function definitions.</td></tr>
<tr><td><code>-disposemethod METHODNAMDE</code></td><td>The name of the method, if any, whose implicit pointer parameter should be annotated with <code>dispose</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The C functions are presumed to be using the <code>_stdcall</code> calling convention. The created commands are of the form <code>INTERFACENAME.METHODNAME</code>. The first argument to each is typed as <code>pointer.INTERFACENAME</code>.</p>
<p class='ruff'>The order of the methods in <code>$methodlist</code> must be the same as that in the corresponding C interface. All functions in the interface are expected to have a pointer to the interface as the first parameter.</p>
<p class='ruff'>The <code>$methodlist</code> argument is a flat (not nested) list of function name, return type and parameter list in the same form as described for the <a href="cffi-cffi.html#::cffi::Wrapper::function" title="::cffi::Wrapper::function" class='ruff_cmd'>::cffi::Wrapper::function</a> method except that the first parameter in the C function, the pointer to the object, should not be included.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Interface::methods" title="methods" class='ruff_cmd'>methods</a></p>
<h3 class='ruffclass'><a name='::cffi::Struct'>Struct</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::constructor" title="constructor" class='ruff_cmd'>constructor</a></td><td>Constructor for the class.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::allocate" title="allocate" class='ruff_cmd'>allocate</a></td><td>Allocates memory for one or more C structs.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::describe" title="describe" class='ruff_cmd'>describe</a></td><td>Returns a human-readable description of the C struct definition.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::fieldpointer" title="fieldpointer" class='ruff_cmd'>fieldpointer</a></td><td>Returns a pointer corresponding to the address of a field within a native structure.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::free" title="free" class='ruff_cmd'>free</a></td><td>Frees memory that was allocated for a native C struct.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::frombinary" title="frombinary" class='ruff_cmd'>frombinary</a></td><td>Decodes a Tcl binary string containing a native C struct into a Tcl dictionary.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::fromnative" title="fromnative" class='ruff_cmd'>fromnative</a></td><td>Decodes native C struct(s) in memory into a Tcl dictionary.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::fromnative!" title="fromnative!" class='ruff_cmd'>fromnative!</a></td><td>Decodes native C struct(s) in memory into a Tcl dictionary.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::getnative" title="getnative" class='ruff_cmd'>getnative</a></td><td>Returns the value of a field in a native structure in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::getnative!" title="getnative!" class='ruff_cmd'>getnative!</a></td><td>Returns the value of a field in a native structure in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::getnativefields" title="getnativefields" class='ruff_cmd'>getnativefields</a></td><td>Retrieve values of multiple fields from a native struct in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::getnativefields!" title="getnativefields!" class='ruff_cmd'>getnativefields!</a></td><td>Retrieve values of multiple fields from a native struct in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::info" title="info" class='ruff_cmd'>info</a></td><td>Returns a dictionary containing information about the struct layout.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::name" title="name" class='ruff_cmd'>name</a></td><td>Returns the name of the struct.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::new" title="new" class='ruff_cmd'>new</a></td><td>Allocates and initializes a native struct in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::setnative" title="setnative" class='ruff_cmd'>setnative</a></td><td>Sets the value of a field in a native structure in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::setnative!" title="setnative!" class='ruff_cmd'>setnative!</a></td><td>Sets the value of a field in a native structure in memory.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::size" title="size" class='ruff_cmd'>size</a></td><td>Returns the size of the struct.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::tobinary" title="tobinary" class='ruff_cmd'>tobinary</a></td><td>Encodes the Tcl representation of a C struct value into a Tcl binary string.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::tonative" title="tonative" class='ruff_cmd'>tonative</a></td><td>Writes the Tcl dictionary representation of a C struct value to memory in native form.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Struct::tonative!" title="tonative!" class='ruff_cmd'>tonative!</a></td><td>Writes the Tcl dictionary representation of a C struct value to memory in native form.</td></tr>
</table>
<h4 class='ruffmethod'><a name='::cffi::Struct::constructor'>constructor</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Constructs a script level object that maps to a C struct definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Struct create OBJNAME</span> <span class='ruff_arg'>definition ?args?</span><br><span class='ruff_cmd'>Struct new</span> <span class='ruff_arg'>definition ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>definition</code></td><td>Defines the layout and type of the C struct fields.</td></tr>
<tr><td><code>-clear</code></td><td>Clears memory at initialization. See below.</td></tr>
<tr><td><code>-pack PACKVALUE</code></td><td>Changes alignment and padding used for fields. See <a href="cffi-Concepts.html#::Concepts-Structs" title="Structs" >Structs</a>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The created object can be used to pass arguments to and from functions, allocate memory, encode and decode native C structs in memory etc.</p>
<p class='ruff'>The <code>$definition</code> argument is a dictionary mapping field names to the corresponding types. See <a href="cffi-Concepts.html#::Concepts-Packed structs" title="Packed structs" >Packed structs</a> for more information.</p>
<p class='ruff'>The name of the created struct is the same as the name of the returned object without the initial <code>::</code> global namespace qualifier. This name can be retrieved with the <a href="cffi-cffi.html#::cffi::Struct::name" title="name" class='ruff_cmd'>name</a> method and is used to identify the struct when tagging pointers and for typing function parameters and nested struct fields.</p>
<p class='ruff'>If the <code>-clear</code> option is present, the memory of structures of this type is cleared before the field values are initialized. In this case, missing field values in a struct value will not result in an error being raised even if no default annotation is included for the field. This also effectively provides a default zero value for all fields.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::allocate'>allocate</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Allocates memory for one or more C structs.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT allocate</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>-count COUNT</code></td><td>Number of structs to allocate.</td></tr>
<tr><td><code>-vlacount VLACOUNT</code></td><td>Number of elements in variable size array.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Unlike in the <a href="cffi-cffi.html#::cffi::Struct::new" title="new" class='ruff_cmd'>new</a> method, the allocated memory is <strong>not initialized</strong>. This is the case even if the struct definition includes the <code>-clear</code> option.</p>
<p class='ruff'>The option <code>-vlacount</code> must be specified if the struct contains a field that is a variable length array (VLA) or a nested struct that contains a VLA. <code>VLACOUNT</code> is then length of that array.</p>
<p class='ruff'>The allocate memory must be freed by calling the <a href="cffi-cffi.html#::cffi::Struct::free" title="free" class='ruff_cmd'>free</a> method of the struct.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory tagged with the struct name.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::describe'>describe</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a human-readable description of the C struct definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT describe</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>This is primarily for debugging and troubleshooting purposes. Note the returned information will not take into account the variable components of the struct if any.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a human-readable description of the C struct definition.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::fieldpointer'>fieldpointer</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a pointer corresponding to the address of a field within a native structure</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT fieldpointer</span> <span class='ruff_arg'>pointer fieldname ?tag? ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory allocated for the C struct or array. Must be a safe pointer tagged with the struct name.</td></tr>
<tr><td><code>fieldname</code></td><td>Name of the field.</td></tr>
<tr><td><code>tag</code></td><td>Tag for the returned pointer. Optional, default <code>&quot;&quot;</code>.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Note the returned pointer is not registered as a safe pointer.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a pointer corresponding to the address of a field within a native structure</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::free'>free</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Frees memory that was allocated for a native C struct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT free</span> <span class='ruff_arg'>pointer</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>A pointer returned by <a href="cffi-cffi.html#::cffi::Struct::allocate" title="allocate" class='ruff_cmd'>allocate</a></td></tr>
</table>
<h4 class='ruffmethod'><a name='::cffi::Struct::frombinary'>frombinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Decodes a Tcl binary string containing a native C struct into a Tcl dictionary.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT frombinary</span> <span class='ruff_arg'>bin_value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>bin_value</code></td><td>A Tcl binary value containing the C struct.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the dictionary representation.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::fromnative'>fromnative</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Decodes native C struct(s) in memory into a Tcl dictionary.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT fromnative</span> <span class='ruff_arg'>pointer ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to the C struct or array of structs in memory.</td></tr>
<tr><td><code>index</code></td><td>The index position at which the struct is to be written. Note this interpreted as an <strong>index</strong> into an array of structs, not as a byte offset into memory. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The decoded dictionary or dictionaries are keyed by the field names of the struct. For fields containing variable length arrays, the field holding the length of the array must be explicitly specified and cannot be defaulted.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary of the decoded struct.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Struct::fromnative!" title="fromnative!" class='ruff_cmd'>fromnative!</a>, <a href="cffi-cffi.html#::cffi::Struct::tonative" title="tonative" class='ruff_cmd'>tonative</a>, <a href="cffi-cffi.html#::cffi::Struct::frombinary" title="frombinary" class='ruff_cmd'>frombinary</a></p>
<h4 class='ruffmethod'><a name='::cffi::Struct::fromnative!'>fromnative!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Decodes native C struct(s) in memory into a Tcl dictionary.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT fromnative!</span> <span class='ruff_arg'>pointer ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe or unsafe pointer to the C struct or array of structs in memory.</td></tr>
<tr><td><code>index</code></td><td>The index position at which the struct is to be written. Note this interpreted as an <strong>index</strong> into an array of structs, not as a byte offset into memory. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The decoded dictionary or dictionaries are keyed by the field names of the struct. For fields containing variable length arrays, the field holding the length of the array must be explicitly specified and cannot be defaulted.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary of the decoded struct.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Struct::fromnative" title="fromnative" class='ruff_cmd'>fromnative</a>, <a href="cffi-cffi.html#::cffi::Struct::tonative" title="tonative" class='ruff_cmd'>tonative</a>, <a href="cffi-cffi.html#::cffi::Struct::frombinary" title="frombinary" class='ruff_cmd'>frombinary</a></p>
<h4 class='ruffmethod'><a name='::cffi::Struct::getnative'>getnative</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the value of a field in a native structure in memory</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getnative</span> <span class='ruff_arg'>pointer fieldname ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldname</code></td><td>Name of the field.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In the case of fields of type pointer, the returned pointer is registered as a safe pointer unless the field was marked with the <code>unsafe</code> annotation.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the value of a field in a native structure in memory</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::getnative!'>getnative!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the value of a field in a native structure in memory</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getnative!</span> <span class='ruff_arg'>pointer fieldname ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe or unsafe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldname</code></td><td>Name of the field.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In the case of fields of type pointer, the returned pointer is registered as a safe pointer unless the field was marked with the <code>unsafe</code> annotation.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the value of a field in a native structure in memory</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::getnativefields'>getnativefields</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Retrieve values of multiple fields from a native struct in memory.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getnativefields</span> <span class='ruff_arg'>pointer fieldnames ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldnames</code></td><td>List of field names.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of field values in the same order as <code>$fieldnames</code></p>
<h4 class='ruffmethod'><a name='::cffi::Struct::getnativefields!'>getnativefields!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Retrieve values of multiple fields from a native struct in memory.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getnativefields!</span> <span class='ruff_arg'>pointer fieldnames ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe or unsafe pointer to memory allocated for the C struct. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldnames</code></td><td>List of field names.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of field values in the same order as <code>$fieldnames</code></p>
<h4 class='ruffmethod'><a name='::cffi::Struct::info'>info</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a dictionary containing information about the struct layout</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT info</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>-vlacount VLACOUNT</code></td><td>Number of elements in variable size array.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned dictionary has the following fields:</p>
<table class='ruff_deflist'>
<tr><td>Size</td><td>Size of the struct.</td></tr>
<tr><td>Alignment</td><td>Struct alignment.</td></tr>
<tr><td>Fields</td><td>Dictionary of fields keyed by field name. The value is another nested dictionary with keys <em>Size</em>, <em>Offset</em>, and <em>Definition</em> containing the size, offset in struct, and type definition of the field.</td></tr>
</table>
<p class='ruff'>The option <code>-vlacount</code> must be specified if the struct contains a field that is a variable length array (VLA) or a nested struct that contains a VLA. <code>VLACOUNT</code> is then length of that array.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary containing information about the struct layout</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::name'>name</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the name of the struct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT name</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>Note the name of the struct is different from the name of the object name.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the name of the struct.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::new'>new</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Allocates and initializes a native struct in memory.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT new</span> <span class='ruff_arg'>?initval?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>initval</code></td><td>Initial value for the struct as a dictionary mapping field names to values. Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If no argument is supplied or fields are missing, defaults from the struct definition are used for initialization. An error is raised if any fields are not defaulted unless the <code>-clear</code> option was specified for the <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a>. In that case missing fields without defaults are filled with zeroes.</p>
<p class='ruff'>For fields containing variable length arrays, the field holding the length of the array must be explicitly specified and cannot be defaulted.</p>
<p class='ruff'>The allocated memory must be freed by calling the <a href="cffi-cffi.html#::cffi::Struct::free" title="free" class='ruff_cmd'>free</a> method for the struct.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a safe pointer to the allocated memory tagged with the struct name.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::setnative'>setnative</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Sets the value of a field in a native structure in memory</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT setnative</span> <span class='ruff_arg'>pointer fieldname value ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldname</code></td><td>Name of the field.</td></tr>
<tr><td><code>value</code></td><td>Value to store in the field.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The field being set must not be a variable sized field, or field holding a count for a variable sized field; otherwise, an error is raised.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::setnative!'>setnative!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Sets the value of a field in a native structure in memory</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT setnative!</span> <span class='ruff_arg'>pointer fieldname value ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe or unsafe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>fieldname</code></td><td>Name of the field.</td></tr>
<tr><td><code>value</code></td><td>Value to store in the field.</td></tr>
<tr><td><code>index</code></td><td>If present, <code>$pointer</code> is interpreted as pointing to an array of structs and this is the index into that array. For variable sized structs <code>index</code> must be <code>0</code> or unspecified. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The field being set must not be a variable sized field, or field holding a count for a variable sized field; otherwise, an error is raised.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::size'>size</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the size of the struct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT size</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>-vlacount VLACOUNT</code></td><td>Number of elements in variable size array.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The option <code>-vlacount</code> must be specified if the struct contains a field that is a variable length array (VLA) or a nested struct that contains a VLA. <code>VLACOUNT</code> is then length of that array.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the size of the struct.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::tobinary'>tobinary</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Encodes the Tcl representation of a C struct value into a Tcl binary string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT tobinary</span> <span class='ruff_arg'>dict_value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>dict_value</code></td><td>A Tcl dictionary representation of a C struct value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the binary string containing the native C struct.</p>
<h4 class='ruffmethod'><a name='::cffi::Struct::tonative'>tonative</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Writes the Tcl dictionary representation of a C struct value to memory in native form.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT tonative</span> <span class='ruff_arg'>pointer initializer ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>initializer</code></td><td>The Tcl dictionary value.</td></tr>
<tr><td><code>index</code></td><td>The index position at which the struct is to be written. Note this interpreted as an <strong>index</strong> into an array of structs, not as a byte offset into memory. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The method raises an error if the struct is variable size.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Struct::tonative!" title="tonative!" class='ruff_cmd'>tonative!</a>, <a href="cffi-cffi.html#::cffi::Struct::fromnative" title="fromnative" class='ruff_cmd'>fromnative</a>, <a href="cffi-cffi.html#::cffi::Struct::tobinary" title="tobinary" class='ruff_cmd'>tobinary</a></p>
<h4 class='ruffmethod'><a name='::cffi::Struct::tonative!'>tonative!</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Struct" title="::cffi::Struct" class='ruff_cmd'>::cffi::Struct</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Writes the Tcl dictionary representation of a C struct value to memory in native form.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT tonative!</span> <span class='ruff_arg'>pointer initializer ?index?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>pointer</code></td><td>Safe or unsafe pointer to memory allocated for the C struct or array. Must be tagged with the struct name.</td></tr>
<tr><td><code>initializer</code></td><td>The Tcl dictionary value.</td></tr>
<tr><td><code>index</code></td><td>The index position at which the struct is to be written. Note this interpreted as an <strong>index</strong> into an array of structs, not as a byte offset into memory. Optional, default <code>0</code>.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The method raises an error if the struct is variable size.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Struct::tonative" title="tonative" class='ruff_cmd'>tonative</a>, <a href="cffi-cffi.html#::cffi::Struct::fromnative" title="fromnative" class='ruff_cmd'>fromnative</a>, <a href="cffi-cffi.html#::cffi::Struct::tobinary" title="tobinary" class='ruff_cmd'>tobinary</a></p>
<h3 class='ruffclass'><a name='::cffi::Union'>Union</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::Union::constructor" title="constructor" class='ruff_cmd'>constructor</a></td><td>Constructor for the class.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::decode" title="decode" class='ruff_cmd'>decode</a></td><td>Returns a field from a native union.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::describe" title="describe" class='ruff_cmd'>describe</a></td><td>Returns a human-readable description of the C union definition.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::encode" title="encode" class='ruff_cmd'>encode</a></td><td>Returns a union in native form with the specified field value.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::info" title="info" class='ruff_cmd'>info</a></td><td>Returns a dictionary containing information about the info layout.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::name" title="name" class='ruff_cmd'>name</a></td><td>Returns the name of the struct.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Union::size" title="size" class='ruff_cmd'>size</a></td><td>Returns the size of the union.</td></tr>
</table>
<h4 class='ruffmethod'><a name='::cffi::Union::constructor'>constructor</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Constructs a script level object that maps to a C union definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Union create OBJNAME</span> <span class='ruff_arg'>definition ?args?</span><br><span class='ruff_cmd'>Union new</span> <span class='ruff_arg'>definition ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>definition</code></td><td>Defines the layout and type of the C struct fields.</td></tr>
<tr><td><code>args</code></td><td>Options. Currently the only option is <code>-clear</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The created object can be used to manipulate native C unions.</p>
<p class='ruff'>The <code>$definition</code> argument is a dictionary mapping field names to the corresponding types. This has the same syntax as <a href="cffi-Concepts.html#::Concepts-Structs" title="Structs" >Structs</a>.</p>
<p class='ruff'>The name of the created struct is the same as the name of the returned object without the initial <code>::</code> global namespace qualifier. This name can be retrieved with the <a href="cffi-cffi.html#::cffi::Union::name" title="name" class='ruff_cmd'>name</a> method and is used to identify the struct when tagging pointers and for typing function parameters and nested struct fields.</p>
<p class='ruff'>If the <code>-clear</code> option is present, the memory of unions of this type is cleared before the field values are initialized.</p>
<h4 class='ruffmethod'><a name='::cffi::Union::decode'>decode</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a field from a native union.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT decode</span> <span class='ruff_arg'>field uvalue</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>field</code></td><td>The field within the union that should be retrieved.</td></tr>
<tr><td><code>uvalue</code></td><td>The opaque union in native form.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a field from a native union.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Union::encode" title="encode" class='ruff_cmd'>encode</a></p>
<h4 class='ruffmethod'><a name='::cffi::Union::describe'>describe</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a human-readable description of the C union definition.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT describe</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>This is primarily for debugging and troubleshooting purposes.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a human-readable description of the C union definition.</p>
<h4 class='ruffmethod'><a name='::cffi::Union::encode'>encode</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a union in native form with the specified field value.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT encode</span> <span class='ruff_arg'>field value</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>field</code></td><td>The field within the union that should be set.</td></tr>
<tr><td><code>value</code></td><td>The value of the field.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a union in native form with the specified field value.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="cffi-cffi.html#::cffi::Union::decode" title="decode" class='ruff_cmd'>decode</a></p>
<h4 class='ruffmethod'><a name='::cffi::Union::info'>info</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a dictionary containing information about the info layout</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT info</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned dictionary has the following fields:</p>
<table class='ruff_deflist'>
<tr><td>Size</td><td>Size of the struct.</td></tr>
<tr><td>Alignment</td><td>Struct alignment.</td></tr>
<tr><td>Fields</td><td>Dictionary of fields keyed by field name. The value is another nested dictionary with keys <em>Size</em>, <em>Offset</em>, and <em>Definition</em> containing the size, offset in struct, and type definition of the field.</td></tr>
</table>
<p class='ruff'>Other fields may be present and should be ignored.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a dictionary containing information about the info layout</p>
<h4 class='ruffmethod'><a name='::cffi::Union::name'>name</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the name of the struct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT name</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>Note the name of the struct may be different from the name of the object command.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the name of the struct.</p>
<h4 class='ruffmethod'><a name='::cffi::Union::size'>size</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Union" title="::cffi::Union" class='ruff_cmd'>::cffi::Union</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Union'>Union</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the size of the union.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT size</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the size of the union.</p>
<h3 class='ruffclass'><a name='::cffi::Wrapper'>Wrapper</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi" title="::cffi" class='ruff_cmd'>::cffi</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::constructor" title="constructor" class='ruff_cmd'>constructor</a></td><td>Constructor for the class.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::destructor" title="destructor" class='ruff_cmd'>destructor</a></td><td>Destructor for the class.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::addressof" title="addressof" class='ruff_cmd'>addressof</a></td><td>Returns the address of a symbol from the loaded library.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::function" title="function" class='ruff_cmd'>function</a></td><td>Creates a Tcl command to invoke a C function in the loaded library.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::functions" title="functions" class='ruff_cmd'>functions</a></td><td>Creates Tcl commands for multiple C functions within the loaded library.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::path" title="path" class='ruff_cmd'>path</a></td><td>Returns the file system path for the wrapped library or image wrapped by the object.</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::stdcall" title="stdcall" class='ruff_cmd'>stdcall</a></td><td>Creates a Tcl command to invoke a C function that uses the <code>__stdcall</code> calling convention from the loaded library..</td></tr>
<tr><td><a href="cffi-cffi.html#::cffi::Wrapper::stdcalls" title="stdcalls" class='ruff_cmd'>stdcalls</a></td><td>Creates Tcl commands for multiple C functions within the loaded library that all use the <code>__stdcall</code> calling convention.</td></tr>
</table>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::constructor'>constructor</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Wraps a shared library / DLL, loading it in the process.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Wrapper create OBJNAME</span> <span class='ruff_arg'>path</span><br><span class='ruff_cmd'>Wrapper new</span> <span class='ruff_arg'>path</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>path</code></td><td>Path to the shared library.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>It is strongly recommended that the path to the shared library be specified as an absolute path. Otherwise, it is located in a system-specific manner involving operating system version, environment variables, registry settings (on Windows), phase of the moon etc.. This is not advisable for both reliability and security reasons.</p>
<p class='ruff'>When no longer needed, the object can be deleted in the usual manner (via <code>rename</code> to an empty string) or by invoking its <code>destroy</code> method.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the name of the created object.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::destructor'>destructor</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Destroys the object and releases internal resources.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT destroy</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>The managed library may be unloaded if there is nothing else holding a reference to it.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::addressof'>addressof</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the address of a symbol from the loaded library.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT addressof</span> <span class='ruff_arg'>symbol</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>symbol</code></td><td>Name of the symbol.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command will raise an error if the symbol is not found.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the address of a symbol from the loaded library.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::function'>function</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates a Tcl command to invoke a C function in the loaded library.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT function</span> <span class='ruff_arg'>fnname fntype parameters</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>fnname</code></td><td>Name of the function and optionally, Tcl command.</td></tr>
<tr><td><code>fntype</code></td><td>The type definition for the return value from the function.</td></tr>
<tr><td><code>parameters</code></td><td>List of alternating parameter name and type definitions.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command creates a Tcl command corresponding to a C function contained in the library. The function must be one that follows the default C calling convention (See <a href="cffi-Concepts.html#::Concepts-Calling conventions" title="Calling conventions" >Calling conventions</a>).</p>
<p class='ruff'>The <code>$fnname</code> argument is a one or two element list, the first being the name of the C function and the second, if present, being the name of the corresponding Tcl command. The latter defaults to the former if unspecified. Unless fully qualified, the command is created in the namespace from which it is called.</p>
<p class='ruff'>The return type of the C function is specified through the <code>$fntype</code> argument which should be a <a href="cffi-Concepts.html#::Concepts-Return types" title="type declaration" >type declaration</a>. See <a href="cffi-Cookbook.html#::Cookbook-Return type declaration" title="syntax" >syntax</a>.</p>
<p class='ruff'>The <code>$parameters</code> argument is a list of alternating parameter names and type declarations that describe the <a href="cffi-Concepts.html#::Concepts-Parameters" title="parameters" >parameters</a> of the C function. The parameter name is only used to construct error messages while the latter determines how arguments are converted and passed to the C function. See <a href="cffi-Cookbook.html#::Cookbook-Parameter declaration" title="syntax" >syntax</a>.</p>
<p class='ruff'>The return type as well as parameter type declarations may have annotations that control semantics and behavior with respect to how values are passed and converted between Tcl and C. See <a href="cffi-Concepts.html#::Concepts-Functions" title="Functions" >Functions</a> for details of these.</p>
<p class='ruff'>The command will raise an error if the function identified by <code>$cname</code> is not found in the loaded DLL.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the name of the created Tcl command.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::functions'>functions</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates Tcl commands for multiple C functions within the loaded library.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT functions</span> <span class='ruff_arg'>fnlist ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>fnlist</code></td><td>List of function definitions.</td></tr>
<tr><td><code>-ignoremissing</code></td><td>Do not raise an error if a function is not found.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>This is a wrapper around the <a href="cffi-cffi.html#::cffi::Wrapper::function" title="function" class='ruff_cmd'>function</a> method that provides some syntactic sugar for defining multiple functions. The <code>$fnlist</code> argument is a flat (not nested) list of function name, return type and parameter list in the same form as described for the <a href="cffi-cffi.html#::cffi::Wrapper::function" title="function" class='ruff_cmd'>function</a> method.</p>
<p class='ruff'>If a function is not found, the command will raise an error but those functions that are found will be defined. The error can be completely suppressed with the <code>-ignoremissing</code> option.</p>
<p class='ruff'>If the function name element is <code>#</code>, the triple is ignored, effectively being considered a comment.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::path'>path</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns the file system path for the wrapped library or image wrapped by the object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT path</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>The returned path may be or may not be normalized and may be in native form or Tcl's canonical form. If no <code>path</code> argument was provided to the constructor, an empty string may be returned on some platforms.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the file system path for the wrapped library or image wrapped by the object.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::stdcall'>stdcall</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates a Tcl command to invoke a C function that uses the <code>__stdcall</code> calling convention from the loaded library..</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT stdcall</span> <span class='ruff_arg'>fnname fntype parameters</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>fnname</code></td><td>Name of the function and optionally, Tcl command.</td></tr>
<tr><td><code>fntype</code></td><td>The type definition for the return value from the function.</td></tr>
<tr><td><code>parameters</code></td><td>List of alternating parameter name and type definitions.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The command creates a Tcl command corresponding to a C function contained in the library. The function must be one that follows the <code>__stdcall</code> calling convention (See <a href="cffi-Concepts.html#::Concepts-Calling conventions" title="Calling conventions" >Calling conventions</a>). The only platform where this differs from the C calling convention is 32-bit Windows. On other platforms, this method is a synonym for <a href="cffi-cffi.html#::cffi::Wrapper::function" title="function" class='ruff_cmd'>function</a>.</p>
<p class='ruff'>See <a href="cffi-cffi.html#::cffi::Wrapper::function" title="function" class='ruff_cmd'>function</a> for other details.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the name of the created Tcl command.</p>
<h4 class='ruffmethod'><a name='::cffi::Wrapper::stdcalls'>stdcalls</a><span class='ns_scope'> [<a href="cffi-cffi.html#::cffi::Wrapper" title="::cffi::Wrapper" class='ruff_cmd'>::cffi::Wrapper</a>]</span><span class='ruff-uplink'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a>, <a href='#top'>Top</a>, <a href='cffi.html'>Main</a>, <a href='cffi-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Creates Tcl commands for multiple C functions within the loaded library that all use the <code>__stdcall</code> calling convention.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT stdcalls</span> <span class='ruff_arg'>fnlist ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>fnlist</code></td><td>List of function definitions.</td></tr>
<tr><td><code>-ignoremissing</code></td><td>Do not raise an error if a function is not found.</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>This is a wrapper around the <a href="cffi-cffi.html#::cffi::Wrapper::stdcall" title="stdcall" class='ruff_cmd'>stdcall</a> method that provides some syntactic sugar for defining multiple functions. The <code>$fnlist</code> argument is a flat (not nested) list of function name, return type and parameter list in the same form as described for the <a href="cffi-cffi.html#::cffi::Wrapper::stdcall" title="stdcall" class='ruff_cmd'>stdcall</a> method.</p>
<p class='ruff'>If a function is not found, the command will raise an error but those functions that are found will be defined. The error can be completely suppressed with the <code>-ignoremissing</code> option.</p>
<p class='ruff'>If the function name element is <code>#</code>, the triple is ignored, effectively being considered a comment.</p>
</main><nav class='ruff-nav'><ul ><li class='ruff-toc1'><a style='padding-top:2px;' href='cffi.html'>Start page</a></li>
<li class='ruff-toc1'><a href='cffi-docindex.html' accesskey='i'>Index</a></li>
<hr>
<li class='ruff-toc1'><a href='cffi-Concepts.html'>Concepts</a></li>
<li class='ruff-toc1'><a href='cffi-Cookbook.html'>Cookbook</a></li>
<li class='ruff-toc1'><a class='ruff-highlight' href='cffi-cffi.html'>cffi</a></li>
<hr><li class='ruff-toc2'><a href='#::cffi-Commands'>Commands</a></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias'>alias</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias body'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> body</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias body</span> <span class='ruff_arg'>alias_name</span></pre>Returns the resolved body of an alias.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias clear'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> clear</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias clear</span> </pre>Deletes all aliases from the interpreter
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias define'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> define</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias define</span> <span class='ruff_arg'>name definition</span>
<span class='ruff_cmd'>alias define</span> <span class='ruff_arg'>aliasdefs</span></pre>Defines one or more type aliases.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias delete'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> delete</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias delete</span> <span class='ruff_arg'>pattern</span></pre>Deletes aliases matching a pattern.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias list'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> list</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias list</span> <span class='ruff_arg'>?pattern?</span></pre>Returns a list of aliases that match the specified pattern.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::alias load'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> load</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>alias load</span> <span class='ruff_arg'>alias_set</span></pre>Loads predefined type aliases.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::arena'>arena</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>arena</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::arena allocate'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> allocate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>arena allocate</span> <span class='ruff_arg'>sizespec ?tag?</span></pre>Allocates memory in the current arena frame in the memory arena.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::arena new'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> new</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>arena new</span> <span class='ruff_arg'>typespec initializer ?tag?</span></pre>Allocates memory in the current arena for a type and initializes it.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::arena popframe'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> popframe</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>arena popframe</span> </pre>Pops the current frame from the memory arena.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::arena pushframe'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> pushframe</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>arena pushframe</span> <span class='ruff_arg'>?size?</span>
<span class='ruff_cmd'>arena pushframe</span> <span class='ruff_arg'>size ?tag?</span></pre>Pushes a new stack frame on the memory arena.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::call'>call</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>call</span> <span class='ruff_arg'>fnptr ?args?</span></pre>Invokes a C function through a function pointer.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::callback'>callback</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>callback</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::callback free'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> free</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>callback free</span> <span class='ruff_arg'>cb</span></pre>Frees a callback pointer
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::callback new'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> new</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>callback new</span> <span class='ruff_arg'>protoname cmdprefix error_value</span></pre>Wraps a script level command into a C function
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum'>enum</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum alias'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> alias</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum alias</span> <span class='ruff_arg'>enumname enumdefs typedecl</span></pre>Defines a new enumeration and alias of the same name
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum clear'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> clear</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum clear</span> </pre>Deletes all enumerations from the interpreter
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum define'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> define</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum define</span> <span class='ruff_arg'>enumname enumdefs</span></pre>Defines a new enumeration.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum delete'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> delete</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum delete</span> <span class='ruff_arg'>pattern</span></pre>Deletes enumerations.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum flags'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> flags</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum flags</span> <span class='ruff_arg'>enumname membernames</span></pre>Defines an enumeration as bit flags.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum list'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> list</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum list</span> <span class='ruff_arg'>pattern</span></pre>Lists enumerations.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum mask'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> mask</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum mask</span> <span class='ruff_arg'>enumname membernames</span></pre>Returns an integer mask formed by bitwise OR-ing the passed enumeration members
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum members'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> members</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum members</span> <span class='ruff_arg'>enumname</span></pre>Returns a dictionary containing the members in an enumeration.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum name'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> name</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum name</span> <span class='ruff_arg'>enumname membervalue ?default?</span></pre>Returns the symbolic name of a value in an enumeration.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum names'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> names</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum names</span> <span class='ruff_arg'>enumname</span></pre>Returns a list containing the names of members in an enumeration.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum sequence'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> sequence</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum sequence</span> <span class='ruff_arg'>enumname membernames ?start?</span></pre>Defines an enumeration with consecutive member values
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum unmask'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> unmask</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum unmask</span> <span class='ruff_arg'>enumname mask</span></pre>Returns a list of enumeration member names corresponding to the bits set in <code>$mask</code>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::enum value'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> value</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>enum value</span> <span class='ruff_arg'>enumname membername ?default?</span></pre>Returns the value of an enumeration member
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help'>help</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help alias'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> alias</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help alias</span> <span class='ruff_arg'>NAME</span></pre>Returns a string describing an <a href="cffi-cffi.html#::cffi::alias" title="alias" class='ruff_cmd'>alias</a> definition.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help enum'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> enum</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help enum</span> <span class='ruff_arg'>NAME</span></pre>Returns a string describing an <a href="cffi-cffi.html#::cffi::enum" title="enum" class='ruff_cmd'>enum</a> definition.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help function'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> function</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help function</span> <span class='ruff_arg'>NAME</span></pre>Returns a string describing the syntax and parameter definitions for a CFFI wrapped function.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help functions'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> functions</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help functions</span> <span class='ruff_arg'>?PATTERN?</span></pre>Returns a list of CFFI-wrapped functions matching the pattern <code>PATTERN</code>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help struct'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> struct</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help struct</span> <span class='ruff_arg'>NAME</span></pre>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Struct" title="Struct" class='ruff_cmd'>Struct</a>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::help union'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> union</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>help union</span> <span class='ruff_arg'>NAME</span></pre>Returns a string describing field types in a <a href="cffi-cffi.html#::cffi::Union" title="Union" class='ruff_cmd'>Union</a>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::limits'>limits</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>limits</span> <span class='ruff_arg'>type</span></pre>Get the lower and upper limits for an integral base type
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory'>memory</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory allocate'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> allocate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory allocate</span> <span class='ruff_arg'>sizespec ?tag?</span></pre>Allocates memory of the specified size
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory fill'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> fill</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory fill</span> <span class='ruff_arg'>pointer bytevalue count ?offset?</span></pre>Fills memory with a specified value
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory free'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> free</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory free</span> <span class='ruff_arg'>pointer</span></pre>Frees the memory referenced by the passed pointer
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory frombinary'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> frombinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory frombinary</span> <span class='ruff_arg'>bin_value ?tag?</span></pre>Allocates memory and copied the passed Tcl binary string into it.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory fromstring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> fromstring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory fromstring</span> <span class='ruff_arg'>value ?encoding?</span></pre>Allocates memory and stores a Tcl string in it in the specified encoding.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory fromunistring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> fromunistring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory fromunistring</span> <span class='ruff_arg'>value</span></pre>Allocates memory and stores a Tcl string as a sequence of Tcl_UniChars.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory fromwinstring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> fromwinstring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory fromwinstring</span> <span class='ruff_arg'>value</span></pre>Allocates memory and stores a Tcl string as a sequence of winchars.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory get'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> get</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory get</span> <span class='ruff_arg'>pointer typespec ?index?</span></pre>Converts a native value in memory into a Tcl script level value
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory get!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> get!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory get!</span> <span class='ruff_arg'>pointer typespec ?index?</span></pre>Converts a native value in memory into a Tcl script level value
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory new'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> new</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory new</span> <span class='ruff_arg'>typespec initializer ?tag?</span></pre>Allocates memory for a type and initializes it.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory set'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> set</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory set</span> <span class='ruff_arg'>pointer typespec value ?index?</span></pre>Converts a value as per a type specification and stores it in memory in native form
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory set!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> set!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory set!</span> <span class='ruff_arg'>pointer typespec value ?index?</span></pre>Converts a value as per a type specification and stores it in memory in native form
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tobinary'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tobinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tobinary</span> <span class='ruff_arg'>pointer size ?offset?</span></pre>Returns the content of a memory block as a Tcl binary string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tobinary!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tobinary!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tobinary!</span> <span class='ruff_arg'>pointer size ?offset?</span></pre>Returns the content of a memory block as a Tcl binary string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tostring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tostring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tostring</span> <span class='ruff_arg'>pointer ?encoding? ?offset?</span></pre>Returns the content of a memory block as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tostring!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tostring!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tostring!</span> <span class='ruff_arg'>pointer ?encoding? ?offset?</span></pre>Returns the content of a memory block as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tounistring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tounistring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tounistring</span> <span class='ruff_arg'>pointer ?offset?</span></pre>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory tounistring!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tounistring!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory tounistring!</span> <span class='ruff_arg'>pointer ?offset?</span></pre>Returns the content of a memory block containing a nul-terminated sequence of Tcl_UniChars as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory towinstring'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> towinstring</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory towinstring</span> <span class='ruff_arg'>pointer ?offset?</span></pre>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::memory towinstring!'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> towinstring!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>memory towinstring!</span> <span class='ruff_arg'>pointer ?offset?</span></pre>Returns the content of a memory block containing a nul-terminated sequence of winchars as a Tcl string.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pkgconfig'>pkgconfig</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pkgconfig</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pkgconfig get'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> get</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pkgconfig get</span> <span class='ruff_arg'>key</span></pre>Gets the value of a configuration key.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pkgconfig list'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> list</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pkgconfig list</span> </pre>Returns the list of keys containing information about the package configuration.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer'>pointer</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer address'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> address</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer address</span> <span class='ruff_arg'>pointer</span></pre>Returns the address component of the pointer.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer cast'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> cast</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer cast</span> <span class='ruff_arg'>pointer ?TAG?</span></pre>Casts a pointer to a new tag.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer castable'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> castable</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer castable</span> <span class='ruff_arg'>subtags supertag</span></pre>Specifies that pointers with tag <code>$subtag</code> are acceptable in declarations that require <code>$supertag</code>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer castables'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> castables</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer castables</span> </pre>Returns a list of tags that have been marked as castable with the <a href="cffi-cffi.html#::cffi::pointer castable" title="pointer castable" class='ruff_cmd'>pointer castable</a> command..
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer check'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> check</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer check</span> <span class='ruff_arg'>pointer</span></pre>Validates a pointer and raise an exception if invalid.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer compare'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> compare</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer compare</span> <span class='ruff_arg'>ptr1 ptr2</span></pre>Compares if two pointers are the same
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer counted'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> counted</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer counted</span> <span class='ruff_arg'>pointer</span></pre>Registers a pointer as a counted pointer
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer dispose'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> dispose</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer dispose</span> <span class='ruff_arg'>pointer</span></pre>Unregisters a safe or counted pointer
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer info'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> info</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer info</span> <span class='ruff_arg'>pointer</span></pre>Returns a dictionary containing registration information about a pointer.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer invalidate'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> invalidate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer invalidate</span> <span class='ruff_arg'>pointer</span></pre>Unregisters a safe, counted or pinned pointer irrespective its reference count.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer isnull'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> isnull</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer isnull</span> <span class='ruff_arg'>pointer</span></pre>Returns true if the pointer is a NULL pointer, false otherwise.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer isvalid'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> isvalid</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer isvalid</span> <span class='ruff_arg'>pointer</span></pre>Validates a pointer.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer list'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> list</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer list</span> <span class='ruff_arg'>?tag?</span></pre>Returns a list of registered pointers optionally filtered by a tag.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer make'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> make</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer make</span> <span class='ruff_arg'>address ?tag?</span></pre>Return a pointer for a memory address.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer pin'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> pin</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer pin</span> <span class='ruff_arg'>pointer</span></pre>Pins a pointer as permanently safe.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer safe'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> safe</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer safe</span> <span class='ruff_arg'>pointer</span></pre>Registers a pointer as a safe uncounted pointer.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer tag'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tag</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer tag</span> <span class='ruff_arg'>pointer</span></pre>Returns the pointer tag
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::pointer uncastable'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> uncastable</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>pointer uncastable</span> <span class='ruff_arg'>tag</span></pre>Makes pointers with the specified tag uncastable to another type
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::prototype'>prototype</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>prototype</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::prototype delete'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> delete</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>prototype delete</span> <span class='ruff_arg'>pattern</span></pre>Deletes prototypes matching a pattern.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::prototype function'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> function</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>prototype function</span> <span class='ruff_arg'>name fntype parameters</span></pre>Defines a function prototype for calling a function using the default C calling convention.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::prototype list'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> list</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>prototype list</span> <span class='ruff_arg'>?pattern?</span></pre>Returns a list of prototypes matching the specified pattern.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::prototype stdcall'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> stdcall</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>prototype stdcall</span> <span class='ruff_arg'>name fntype parameters</span></pre>Defines a function prototype for calling a function using the stdcall calling convention.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::savederrors'>savederrors</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>savederrors</span> </pre>Return <code>errno</code> and <code>GetLastError()</code> values from the last CFFI call annotated with <code>saveerrors</code>.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type'>type</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type</span> <span class='ruff_arg'>subcommand ...</span></pre>A command ensemble.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type count'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> count</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type count</span> <span class='ruff_arg'>type</span></pre>Returns the count of elements in an array type
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type frombinary'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> frombinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type frombinary</span> <span class='ruff_arg'>typespec value</span></pre>Converts the native binary value to its script level representation.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type info'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> info</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type info</span> <span class='ruff_arg'>typedecl ?args?</span></pre>Returns a dictionary containing various information about a type declaration
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type size'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> size</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type size</span> <span class='ruff_arg'>type ?args?</span></pre>Returns the size of a type in terms of the number of bytes of memory occupied by that type.
</span></li><li class='ruff-toc3 ruff-tip'><a href='cffi-cffi.html#::cffi::type tobinary'><span style='visibility:hidden'>&nbsp;&nbsp;&nbsp;</span> tobinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>type tobinary</span> <span class='ruff_arg'>typespec value</span></pre>Converts a script level value to a native representation.
</span></li><li class='ruff-toc2'><a href='#::cffi-Classes'>Classes</a></li><li class='ruff-toc3'><a href='cffi-cffi.html#::cffi::Interface'>Interface</a></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Interface::constructor'>constructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Interface create OBJNAME</span> <span class='ruff_arg'>?args?</span>
<span class='ruff_cmd'>Interface new</span> <span class='ruff_arg'>?args?</span></pre>Defines an interface consisting of method definitions.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Interface::id'>id</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT id</span> </pre>Returns the id for the interface as passed via the <code>-id</code> option in the interface definition.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Interface::methods'>methods</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT methods</span> <span class='ruff_arg'>methodlist ?args?</span></pre>Creates Tcl commands wrapping the C functions comprising an interface.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Interface::stdmethods'>stdmethods</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT stdmethods</span> <span class='ruff_arg'>methodlist ?args?</span></pre>Creates Tcl commands corresponding to the C functions comprising an interface.
</span></li><li class='ruff-toc3'><a href='cffi-cffi.html#::cffi::Struct'>Struct</a></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::constructor'>constructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Struct create OBJNAME</span> <span class='ruff_arg'>definition ?args?</span>
<span class='ruff_cmd'>Struct new</span> <span class='ruff_arg'>definition ?args?</span></pre>Constructs a script level object that maps to a C struct definition.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::allocate'>allocate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT allocate</span> <span class='ruff_arg'>?args?</span></pre>Allocates memory for one or more C structs.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::describe'>describe</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT describe</span> </pre>Returns a human-readable description of the C struct definition.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::fieldpointer'>fieldpointer</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT fieldpointer</span> <span class='ruff_arg'>pointer fieldname ?tag? ?index?</span></pre>Returns a pointer corresponding to the address of a field within a native structure
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::free'>free</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT free</span> <span class='ruff_arg'>pointer</span></pre>Frees memory that was allocated for a native C struct.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::frombinary'>frombinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT frombinary</span> <span class='ruff_arg'>bin_value</span></pre>Decodes a Tcl binary string containing a native C struct into a Tcl dictionary.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::fromnative'>fromnative</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT fromnative</span> <span class='ruff_arg'>pointer ?index?</span></pre>Decodes native C struct(s) in memory into a Tcl dictionary.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::fromnative!'>fromnative!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT fromnative!</span> <span class='ruff_arg'>pointer ?index?</span></pre>Decodes native C struct(s) in memory into a Tcl dictionary.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::getnative'>getnative</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT getnative</span> <span class='ruff_arg'>pointer fieldname ?index?</span></pre>Returns the value of a field in a native structure in memory
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::getnative!'>getnative!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT getnative!</span> <span class='ruff_arg'>pointer fieldname ?index?</span></pre>Returns the value of a field in a native structure in memory
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::getnativefields'>getnativefields</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT getnativefields</span> <span class='ruff_arg'>pointer fieldnames ?index?</span></pre>Retrieve values of multiple fields from a native struct in memory.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::getnativefields!'>getnativefields!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT getnativefields!</span> <span class='ruff_arg'>pointer fieldnames ?index?</span></pre>Retrieve values of multiple fields from a native struct in memory.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::info'>info</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT info</span> <span class='ruff_arg'>?args?</span></pre>Returns a dictionary containing information about the struct layout
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::name'>name</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT name</span> </pre>Returns the name of the struct.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::new'>new</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT new</span> <span class='ruff_arg'>?initval?</span></pre>Allocates and initializes a native struct in memory.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::setnative'>setnative</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT setnative</span> <span class='ruff_arg'>pointer fieldname value ?index?</span></pre>Sets the value of a field in a native structure in memory
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::setnative!'>setnative!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT setnative!</span> <span class='ruff_arg'>pointer fieldname value ?index?</span></pre>Sets the value of a field in a native structure in memory
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::size'>size</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT size</span> <span class='ruff_arg'>?args?</span></pre>Returns the size of the struct.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::tobinary'>tobinary</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT tobinary</span> <span class='ruff_arg'>dict_value</span></pre>Encodes the Tcl representation of a C struct value into a Tcl binary string.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::tonative'>tonative</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT tonative</span> <span class='ruff_arg'>pointer initializer ?index?</span></pre>Writes the Tcl dictionary representation of a C struct value to memory in native form.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Struct::tonative!'>tonative!</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT tonative!</span> <span class='ruff_arg'>pointer initializer ?index?</span></pre>Writes the Tcl dictionary representation of a C struct value to memory in native form.
</span></li><li class='ruff-toc3'><a href='cffi-cffi.html#::cffi::Union'>Union</a></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::constructor'>constructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Union create OBJNAME</span> <span class='ruff_arg'>definition ?args?</span>
<span class='ruff_cmd'>Union new</span> <span class='ruff_arg'>definition ?args?</span></pre>Constructs a script level object that maps to a C union definition.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::decode'>decode</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT decode</span> <span class='ruff_arg'>field uvalue</span></pre>Returns a field from a native union.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::describe'>describe</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT describe</span> </pre>Returns a human-readable description of the C union definition.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::encode'>encode</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT encode</span> <span class='ruff_arg'>field value</span></pre>Returns a union in native form with the specified field value.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::info'>info</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT info</span> </pre>Returns a dictionary containing information about the info layout
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::name'>name</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT name</span> </pre>Returns the name of the struct.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Union::size'>size</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT size</span> </pre>Returns the size of the union.
</span></li><li class='ruff-toc3'><a href='cffi-cffi.html#::cffi::Wrapper'>Wrapper</a></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::constructor'>constructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Wrapper create OBJNAME</span> <span class='ruff_arg'>path</span>
<span class='ruff_cmd'>Wrapper new</span> <span class='ruff_arg'>path</span></pre>Wraps a shared library / DLL, loading it in the process.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::destructor'>destructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT destroy</span> </pre>Destroys the object and releases internal resources.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::addressof'>addressof</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT addressof</span> <span class='ruff_arg'>symbol</span></pre>Returns the address of a symbol from the loaded library.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::function'>function</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT function</span> <span class='ruff_arg'>fnname fntype parameters</span></pre>Creates a Tcl command to invoke a C function in the loaded library.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::functions'>functions</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT functions</span> <span class='ruff_arg'>fnlist ?args?</span></pre>Creates Tcl commands for multiple C functions within the loaded library.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::path'>path</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT path</span> </pre>Returns the file system path for the wrapped library or image wrapped by the object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::stdcall'>stdcall</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT stdcall</span> <span class='ruff_arg'>fnname fntype parameters</span></pre>Creates a Tcl command to invoke a C function that uses the <code>__stdcall</code> calling convention from the loaded library..
</span></li><li class='ruff-toc4 ruff-tip'><a href='cffi-cffi.html#::cffi::Wrapper::stdcalls'>stdcalls</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>OBJECT stdcalls</span> <span class='ruff_arg'>fnlist ?args?</span></pre>Creates Tcl commands for multiple C functions within the loaded library that all use the <code>__stdcall</code> calling convention.
</span></li></ul></nav><footer class='ruff-layout-footer ruff-ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div><div>&copy; Ashok P. Nadkarni</div></footer>
</div></body></html>
